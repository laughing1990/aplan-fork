<link rel="stylesheet"
  href="/framework-ui/src/main/resources/static/agcloud/framework/icon-lib/agcloud-fonts/iconfont.css"
  th:href="@{/agcloud/framework/icon-lib/agcloud-fonts/iconfont.css}">
<link rel="stylesheet" href="../../../../static/mall/css/userCenter/matSupplement.css"
  th:href="@{/mall/css/userCenter/matSupplement.css}">
<link rel="stylesheet" href="../../../static/mall/css/userCenter/parallelDeclare.css"
  th:href="@{/mall/css/userCenter/parallelDeclare.css}">
<link rel="stylesheet" href="../../../static/mall/css/userCenter/matCom.css"
  th:href="@{/mall/css/userCenter/matCom.css}">
<div id="materialSupplement" v-cloak v-loading.fullscreen.lock="mloading">

  <div v-if="!isProjDetail">
    <p class="p-header">补齐补正</p>
    <div class="search-input">
      <span class="search-title">项目/工程查询</span>
      <input class="search-pro-num" type="text" value="" id="keyWord" v-model.trim="listSearchData.keyword"
        placeholder="请输入办件编号 / 申报流水号 / 项目名称 / 事项名称">
      <button class="search-btn" @click="searchMatSupplementList"><i class="el-icon-search"
          style="font-size: 16px;"></i> 查询</button>
    </div>
    <table class="wt-table" v-if="materialListData.length>0" style="display: none;">
      <thead>
        <tr>
          <!-- <th class="al" width="20%">办件编号</th> -->
          <th class="al" width="20%">申报流水号</th>
          <th class="al" width="25%">项目代码 | 项目名称</th>
          <th class="al" width="25%">阶段/事项</th>
          <th class="al" width="10%">容缺/补正</th>
          <th class="al" width="15%">操作</th>
        </tr>
      </thead>
      <tbody id="inProgressProjBody">
        <tr v-for="item in materialListData">
          <!-- <td class="al" width="20%">{{item.iteminstCode}}</td> -->
          <td class="al" width="20%">{{item.applyinstCode}}</td>
          <td class="al" width="25%">
            <el-tooltip placement="top" effect="light">
              <div slot="content">项目代码：{{item.localCode}}<br /> <br />工程代码：{{item.gcbm}}<br />
                <br />项目/工程名称：{{item.projName}}</div>
              <div>
                <p>{{item.localCode}}</p>
                <span class="ellipsis pro-name">{{item.projName}}</span>
              </div>
            </el-tooltip>
          </td>
          <td class="al" width="25%">
            <el-tooltip placement="top" effect="light" v-if="item.isSeriesApprove == '单项'">
              <div slot="content">所属主题：{{item.themeName}}<br /> <br /> 办理事项：{{item.iteminstName}}</div>
              <div>
                <span class="ellipsis pro-name">{{item.iteminstName}}</span>
              </div>
            </el-tooltip>
            <el-tooltip placement="top" effect="light" v-else>
              <div slot="content">
                所属主题：{{item.themeName}} <br /> <br />
                所处阶段：{{item.stageName}}<br /> <br />
                办理事项：{{item.iteminstName}}
              </div>
              <div class="stageIteminstName-bg">
                <span class="ellipsis pro-name">{{item.iteminstName}}</span>
              </div>
            </el-tooltip>
          </td>
          <td class="al" width="10%">
            <span>{{item.isCorrect == 1 ? '补正': '容缺'}}</span>
          </td>
          <td class="al" width="15%" style="cursor: pointer">
            <a class="color3e97df" href="javascript:;" v-if="item.isCorrect == 1" @click="jumpToSupplementDetail(item)">进入补正</a>
            <a class="color3e97df" href="javascript:;" v-else @click="jumpToCompletionDetail(item)">进入补全</a>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="wt-table" v-else style="display: none;">
      <thead>
        <tr>
          <th class="al" width="20%">办件编号</th>
          <th class="al" width="20%">申报流水号</th>
          <th class="al" width="15%">项目代码 | 项目名称</th>
          <th class="al" width="15%">阶段/事项/辅线名称</th>
          <th class="al" width="10%">反馈意见</th>
          <th class="al" width="15%">操作</th>
        </tr>
      </thead>
      <tbody id="inProgressProjBody">
        <tr>
          <td colspan="5" style="text-align: center;border-bottom:none; color: #909399;">{{noDataTip}}</td>
        </tr>
      </tbody>
    </table>

    <el-table :data="materialListData" class="scrollable" style="width: 100%;" :header-cell-style="{background:'#f7f8fa',height: '60px'}">
      <el-table-column label="申报流水号" prop="applyinstCode" :show-overflow-tooltip ="true" width="140">
      </el-table-column>
      <el-table-column label="项目（工程）代码/名称" :show-overflow-tooltip ="true">
        <template slot-scope="scope">
          <el-tooltip placement="top" effect="light">
            <div slot="content">项目代码：{{scope.row.localCode}}<br /> <br />工程代码：{{scope.row.gcbm}}<br />
              <br />项目/工程名称：{{scope.row.projName}}</div>
            <div>
              <p>{{scope.row.localCode}}</p>
              <p>{{scope.row.projName}}</p>
            </div>
          </el-tooltip>
        </template>
      </el-table-column>
      <el-table-column label="阶段/事项" :show-overflow-tooltip ="true">
        <template slot-scope="scope">
          <el-tooltip placement="top" effect="light" v-if="scope.row.isSeriesApprove == '单项'">
            <div slot="content">所属主题：{{scope.row.themeName}}<br /> <br /> 办理事项：{{scope.row.iteminstName}}</div>
            <div>
              <span class="ellipsis pro-name">{{scope.row.iteminstName}}</span>
            </div>
          </el-tooltip>
          <el-tooltip placement="top" effect="light" v-else>
            <div slot="content">
              所属主题：{{scope.row.themeName}} <br /> <br />
              所处阶段：{{scope.row.stageName}}<br /> <br />
              办理事项：{{scope.row.iteminstName}}
            </div>
            <div class="stageIteminstName-bg">
              <span class="ellipsis pro-name">{{scope.row.iteminstName}}</span>
            </div>
          </el-tooltip>
        </template>
      </el-table-column>
      <el-table-column label="容缺/补正" :show-overflow-tooltip ="true"  width="100">
        <template slot-scope="scope">
          <span>{{scope.row.isCorrect == 1 ? '补正': '容缺'}}</span>
        </template>
      </el-table-column>
      <el-table-column label="操作" width="100">
        <template slot-scope="scope">
          <a class="color3e97df" href="javascript:;" v-if="scope.row.isCorrect == 1" @click="jumpToSupplementDetail(scope.row)">进入补正</a>
          <a class="color3e97df" href="javascript:;" v-else @click="jumpToCompletionDetail(scope.row)">进入补全</a>
        </template>
      </el-table-column>
    </el-table>

    <el-pagination class="mt20 mb20 mr20" background align="right" @size-change="handleSizeChange"
      @current-change="handleCurrentChange" :page-sizes="[10, 20, 30, 50]" :page-size="listSearchData.pageSize"
      :current-page="listSearchData.pageNum" layout="total,sizes, prev, pager, next, jumper" :total="total"
      v-show="total>10">
    </el-pagination>
  </div>

  <div id="projectDetail" class="dl-project-detail" v-else>


  </div>


</div>

<script src="../../../static/mall/js/userCenter/components/matSupplement.js"
  th:src="@{/mall/js/userCenter/components/matSupplement.js}" type="text/javascript"></script>

<style>
  #materialSupplement .parallel-appr-title {
    width: 930px;
    height: 48px;
    line-height: 48px;
    background: rgba(255, 252, 238, 1);
    border: 1px solid rgba(255, 184, 34, 1);
    opacity: 0.76;
    border-radius: 4px;

  }

  #materialSupplement table thead tr th {
    width: 930px;
    height: 60px;
    background: rgba(249, 251, 253, 1);
    font-size: 14px;
    font-family: Microsoft YaHei;
    font-weight: 400;
    color: rgba(127, 133, 144, 1);
  }

  .wt-table th,
  .wt-table td {
    font-size: 14px;
    font-family: Microsoft YaHei;
    font-weight: 400;
    color: rgba(87, 89, 98, 1);
  }

  .el-table__empty-block {
    height: auto;
  }
</style>