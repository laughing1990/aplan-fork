<div class="wt-tab" id="guideListVue" v-cloak v-loading.fullscreen.lock="mloading" style="position: relative;">
  <div>
    <p class="p-header">部门确认</p>
    <div class="wt-tab-content">
      <div class="wt-tab-item" >
        <div class="search-input">
            <span class="search-title">项目/工程查询</span>
            <input type="text" placeholder="请输入工程代码 / 项目代码 / 项目名称"  v-model="keyword">
            <button class="search-btn" @click="pageNumDH = 1;getDraftApplyList();"> <i class="el-icon-search" style="font-size: 16px;"></i>查询</button>
        </div>
        <el-table :data="draftApplyListData"
                  style="width: 100%"
                  class="draft-apply-table">
          <el-table-column label="项目/工程名称" prop="projName" min-width="200px">
            <template slot-scope="scope">
              <el-tooltip placement="top" effect="light">
                <div slot="content">项目代码：{{scope.row.localCode}}<br/> <br/>工程代码：{{scope.row.gcbm}}<br /> <br/>项目/工程名称：{{scope.row.projName}}</div>
                <div>{{scope.row.projName}}</div>
              </el-tooltip>
            </template>
          </el-table-column>
          <el-table-column label="当前阶段" prop="stageName" width="160px"></el-table-column>
          <el-table-column label="创建时间" width="220px">
            <template slot-scope="scope">
              <span>{{$options.filters.formatDate(scope.row.guideStartTime)}}</span>
            </template>
          </el-table-column>
          <el-table-column label="状态" min-width="280px">
            <template slot-scope="scope">
              <span class="guide-state" :class="(scope.row.applyState=='1')?'guiding':'guided'">{{(scope.row.applyState=='1')?'待部门确认':'待申请人确认'}}</span>
            </template>
          </el-table-column>
          <el-table-column label="操作" width="100" align="center">
            <template slot-scope="scope">
              <span class="option-btn">
                <a :href="ctx + 'rest/main/toIndexPage?projInfoId='+scope.row.projInfoId+'&applyinstId='+scope.row.applyinstId+'#declare'">进入查看</a>
              </span>
            </template>
          </el-table-column>
        </el-table>
        <el-pagination background align="right" @size-change="handleSizeChangeDe" style="margin-top:20px;"
                       @current-change="handleCurrentChangeDe" :page-sizes="[10, 20, 30, 50]" :page-size="pageSizeDH"
                       :current-page="pageNumDH" layout="total,sizes, prev, pager, next, jumper" :total="totalDH"
                       v-show="totalDH>10">
        </el-pagination>
      </div>

    </div>
  </div>
</div>

<script src="../../../static/mall/skin_v4.1/js/userCenter/components/guideList.js"
        th:src="@{/mall/skin_v4.1/js/userCenter/components/guideList.js}" type="text/javascript"></script>

<style>
  .draft-apply-table th {
    height: 60px;
    background: rgba(249,251,253,1);
    font-size: 14px;
    font-weight: 400;
    color: rgba(127,133,144,1);
  }
  .guide-state {
    position: relative;
  }
  .guide-state:before {
    content: '';
    position: absolute;
    background: #4293F4;
  }
  .guide-state.guiding:before {
    background: #F59A23;
  }
</style>