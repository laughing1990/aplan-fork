<!--@Author: ZL-->
<!--@Date:   2019/05/27-->
<!--@Last Modified by:   ZL-->
<!--@Last Modified time: $ $-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <!--引入公共css-->
  <!--  <th:block th:include="common/common :: commonheader('并联申报')" />-->
  <meta charset="UTF-8">
  <title>并联申报</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="stylesheet" href="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/element-2/element.css"
        th:href="@{/agcloud/framework/js-lib/element-2/element.css}"/>
  <link rel="stylesheet"
        href="/framework-ui/src/main/resources/static/agcloud/framework/icon-lib/agcloud-fonts/iconfont.css"
        th:href="@{/agcloud/framework/icon-lib/agcloud-fonts/iconfont.css}">
  <link rel="stylesheet"
        href="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/agcloud-lib/css/reset.css"
        th:href="@{/agcloud/framework/js-lib/agcloud-lib/css/reset.css}">
  <style>
    .custor {
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" href="../../static/apply/css/index.css" th:href="@{/apply/css/index.css}">
  <script>
    var ctx = '[[@{/}]]';
  </script>
  <script src="../../static/approve/js/ip.js" th:src="@{/approve/js/ip.js}"></script>
</head>

<body class="gray-body">
<div id="approve" v-cloak v-loading.fullscreen.lock="loading" :class="{'is-audit': isGuidePage}">
  <template data-title="部门辅导有拆分子工程的需要工程审核" v-if="showAuditProj" class="proj-review">
    <p class="au-hint-text"><i class="ag ag-warn-circle"></i>
      当前网厅申报处于部门辅导模式，请先进行工程审核，然后点击“下一步”进行事项的相关确认。
    </p>
    <el-form v-model="auProJForm" label-width="150px" class="au-form" size="medium">
      <el-collapse v-model="activeNames">
        <el-collapse-item name="1">
          <template slot="title">
            <i class="header-icon icon ag ag-project-info"></i>项目信息
          </template>
          <el-row>
            <el-col :span="24">
              <el-form-item label="项目名称">
                <el-input v-model="auProJForm.projName" readonly></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="12">
              <el-form-item label="项目代码">
                <el-input v-model="auProJForm.localCode" readonly></el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item label="项目总投资">
                <el-input v-model="auProJForm.investSum" readonly>
                  <template slot="append">万元</template>
                </el-input>
              </el-form-item>
            </el-col>
          </el-row>
        </el-collapse-item>
        <el-collapse-item name="2">
          <template slot="title">
            <i class="header-icon icon ag ag-project-info"></i>单项工程信息
          </template>
          <el-row>
            <el-col :span="12">
              <el-form-item label="所处阶段">
                <el-input v-model="auProJForm.stageNo" readonly></el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item label="前阶段关联工程代码">
                <el-input v-model="auProJForm.frontStageGcbm" readonly></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="12">
              <el-form-item label="单项工程名称">
                <el-input v-model="auProJForm.splitProjName" readonly></el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item label="单项工程投资金额">
                <el-input v-model="auProJForm.splitInvestSum" readonly>
                  <template slot="append">万元</template>
                </el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="24">
              <el-form-item label="单项工程建设规模">
                <el-input v-model="auProJForm.scaleContent" readonly type="textarea" :rows="3"></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="12">
              <el-form-item label="用地面积">
                <el-input v-model="auProJForm.xmYdmj" readonly>
                  <template slot="append">㎡</template>
                </el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item label="建筑面积">
                <el-input v-model="auProJForm.buildAreaSum" readonly>
                  <template slot="append">㎡</template>
                </el-input>
              </el-form-item>
            </el-col>
          </el-row>
        </el-collapse-item>
        <el-collapse-item name="3">
          <template slot="title">
            <i class="header-icon icon ag ag-project-info"></i>申报单位信息
          </template>
          <template v-if="auProJForm.applySubjectType=='1'"
                    v-for="(u, i) in auProJForm.applyUnit">
            <p class="apply-info-title" style="padding-left:12px;">建设单位</p>
            <el-row>
              <el-col :span="12">
                <el-form-item label="申报单位类型">
                  <el-input v-model="u.unitTypeName" readonly></el-input>
                </el-form-item>
              </el-col>
              <el-col :span="12">
                <el-form-item label="项目单位名称">
                  <el-input v-model="u.applicant" readonly></el-input>
                </el-form-item>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="12">
                <el-form-item label="法人姓名">
                  <el-input v-model="u.idrepresentative" readonly></el-input>
                </el-form-item>
              </el-col>
              <el-col :span="12">
                <el-form-item label="证件号码">
                  <el-input v-model="u.idno" readonly></el-input>
                </el-form-item>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="12">
                <el-form-item label="联系电话">
                  <el-input v-model="u.linkmanMobilePhone" readonly></el-input>
                </el-form-item>
              </el-col>
            </el-row>
          </template>
          <template v-if="auProJForm.applySubjectType=='0'">
            <el-row>
              <el-col :span="12">
                <el-form-item label="申请人">
                  <el-input v-model="auProJForm.applyLinkmanName" readonly></el-input>
                </el-form-item>
              </el-col>
              <el-col :span="12">
                <el-form-item label="申请人身份证号">
                  <el-input v-model="auProJForm.applyLinkmanIdCard" readonly></el-input>
                </el-form-item>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="12">
                <el-form-item label="申请人电话">
                  <el-input v-model="auProJForm.applyLinkmanTel" readonly></el-input>
                </el-form-item>
              </el-col>
              <el-col :span="12">
                <el-form-item label="申请人邮箱">
                  <el-input v-model="auProJForm.applyLinkmanEmail" readonly></el-input>
                </el-form-item>
              </el-col>
            </el-row>
          </template>
        </el-collapse-item>
        <el-collapse-item name="4">
          <template slot="title">
            <i class="header-icon icon ag ag-project-info"></i>工程审核
          </template>
          <el-row>
            <el-col :span="24">
              <el-form-item label="工程审核意见">
                <el-radio v-model="auProJForm.passed" label="true">通过</el-radio>
                <el-radio v-model="auProJForm.passed" label="false">不通过</el-radio>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="24">
              <el-form-item label="意见描述">
                <el-input v-model="auProJForm.reason" type="textarea" :rows="3"></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="24">
              <el-form-item label="">
                <el-checkbox v-model="auProJForm.needSms">短信通知申请人</el-checkbox>
                <div style="margin-top:5px;">
                  <el-button type="primary" @click="ensureAuditProj">确定并下一步</el-button>
                </div>
              </el-form-item>
            </el-col>
          </el-row>
        </el-collapse-item>
      </el-collapse>
    </el-form>
  </template>
  <template v-else>
    <div class="top-proj-name" v-if="isGuidePage||isAgentPage">
      {{topProjName||'加载中...'}}
    </div>
    <div class="title-nav" v-if="!isGuidePage&&!isAgentPage">
      <span>投资项目申报前，请登陆 <a href="http://www.gdtz.gov.cn/tybm/apply3!search.action"
                           target="_blank">“投资项目在线审批监管平台”</a> 进行项目登记赋码</span>
    </div>
    <el-form class="search-proj-info" label-width="115px" v-if="!isGuidePage&&!isAgentPage">
      <el-form-item label="项目/工程查询" id="projCodeInfo">
        <el-select v-model="searchKeyword" :disabled="isDraftsProj" filterable remote autofocus reserve-keyword
                   ref="searchProjInfo"
                   no-data-text="暂无匹配的项目/工程" placeholder="请输入项目（工程）的编码 / 名称" :remote-method="searchProjInfoByKeyword"
                   :loading="loadingProjInfo">
          <el-option v-for="item in projInfoList" :key="item.projInfoId" @click.native="projNameSel(item)"
                     :label="item.projName+' （'+item.localCode+'）'" :value="item.projInfoId">
          </el-option>
        </el-select>
        <el-button type="primary" :disabled="isDraftsProj" icon="icon ag ag-search" @click="linkQuery()">联网查询
        </el-button>
      </el-form-item>

    </el-form>
    <div class="content">
      <div class="vertical-tab" v-if="!isGuidePage">
        <ul>
          <li class="vertical-label"
              v-show="index<showVerLen"
              v-for="(item, index) in verticalTabData"
              :class="activeTab==index?'active':item.target"
              data-name="item.target"
              :key="index"
              @click="targetCollapse(item.target,index)">
            <a :href="'#'+item.target">{{item.label}}</a>
          </li>
        </ul>
      </div>

      <el-collapse v-model="activeNames">
        <!--  基本信息  start  -->
        <el-collapse-item class="clearfix" name="1" id="baseInfo">
          <template slot="title">
            <i class="header-icon icon ag ag-project-info"></i>项目/工程信息
          </template>
          <el-form label-width="176px" ref="projBascInfoShowFrom" :rules="projBascInfoShowFromRules"
                   :model="projBascInfoShow">
            <input type="hidden" name="projInfoId" :value="projBascInfoShow.projInfoId">
            <div class="clearfix">
              <el-form-item class="input-inline" prop="localCode">
                <template slot="label">
                  <el-tooltip class="item" effect="dark"
                              content="填写全国统一项目代码(参考“投资项目基本信息共享规范”中的“投资项目统一代码规范”)。如果项目没有全国统一代码，填写地方项目编码。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  项目代码
                </template>
                <el-input name="localCode" :disabled="linkQuerySucc" v-model="projBascInfoShow.localCode"
                          placeholder="投资平台登记的项目代码">
                  <el-button v-if="!isGuidePage&&!isAgentPage" slot="append" type="primary" :disabled="!localCode==''" @click="getLocalcode()">本地赋码
                  </el-button>
                </el-input>
              </el-form-item>
              <el-form-item class="input-inline" prop="gcbm">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="项目拆分为多个单项工程申报时，单项工程的唯一编码，如果项目不拆分，应与项目代码相同。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  工程代码
                </template>
                <el-input v-model="projBascInfoShow.gcbm" placeholder="请输入工程代码"></el-input>
              </el-form-item>
            </div>

            <el-form-item label="项目/工程名称" class="proj-code-info" prop="projName">
              <el-input name="projName" :disabled="linkQuerySucc" v-model="projBascInfoShow.projName"
                        placeholder="请输入项目/工程名称">
              </el-input>
              <el-button type="primary" @click="showProjTree()">工程管理</el-button>
            </el-form-item>

            <div class="clearfix">
              <el-form-item class="input-inline" label="所属主题">
                <el-select disabled v-model="projBascInfoShow.projApplyType" filterable placeholder="请选择所属主题"
                           @click.native="getProjThemeIdList"
                           :loading="loadingThemeIdList">
                  <el-option v-for="item in projThemeIdList" :key="item.themeId" :label="item.themeName"
                             :value="item.themeName">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" label="立项类型" prop="projType">
                <el-select v-model="projBascInfoShow.projType">
                  <el-option v-for="item in projTypeList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" prop="regionalism">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="市级审批的项目/工程请选择市级行政区划，区县审批的请选择对应的区县行政区划。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  审批行政区划
                </template>
                <el-select filterable v-model="projBascInfoShow.regionalism" placeholder="请选择审批行政区划">
                  <el-option v-for="item in districtList" :key="item.id" :label="item.regionName"
                             :value="item.regionId">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" prop="projectAddress">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="选择项目/工程所在地行政区划。如果是跨区，则选择多个行政区划。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  建设地点
                </template>
                <el-select multiple v-model="projBascInfoShow.projectAddress" placeholder="请选择建设地点">
                  <el-option v-for="item in districtList" :key="item.regionId" :label="item.regionName"
                             :value="item.regionId">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="资金来源" class="input-inline" prop="financialSource">
                <!--<el-radio-group v-model="projBascInfoShow.financialSource">
                    <el-radio v-for="item in zjlyList" :key="item.id" :label="item.itemCode" :value="item.itemCode">
                        {{item.itemName}}
                    </el-radio>
                </el-radio-group>-->
                <el-select v-model="projBascInfoShow.financialSource" placeholder="请选择资金来源">
                  <el-option v-for="item in zjlyList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" label="是否外资">
                <el-radio-group v-model="projBascInfoShow.isForeign">
                  <el-radio label="1" value="1" key="1">是</el-radio>
                  <el-radio label="0" value="0" key="0">否</el-radio>
                </el-radio-group>
              </el-form-item>
              <el-form-item class="input-inline" label="投资类型" prop="investType">
                <el-select v-model="projBascInfoShow.investType">
                  <el-option v-for="item in tzlxList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="土地来源" class="input-inline" prop="landSource" placeholder="请选择土地来源">
                <el-select v-model="projBascInfoShow.landSource">
                  <el-option v-for="item in tdlyList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" prop="isAreaEstimate">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="建设范围未实施区域评估选“否”，建设范围已实施区域评估选“是”。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  是否完成区域评估
                </template>
                <el-radio-group v-model="projBascInfoShow.isAreaEstimate">
                  <el-radio label="1" value="1" key="1">是</el-radio>
                  <el-radio label="0" value="0" key="0">否</el-radio>
                </el-radio-group>
              </el-form-item>
              <el-form-item class="input-inline" prop="isDesignSolution">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="建设用地不带设计方案选“否”，建设用地带设计方案选“是”。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  土地是否带设计方案
                </template>
                <el-radio-group v-model="projBascInfoShow.isDesignSolution">
                  <el-radio label="1" value="1" key="1">是</el-radio>
                  <el-radio label="0" value="0" key="0">否</el-radio>
                </el-radio-group>
              </el-form-item>
              <el-form-item class="input-inline" label="建设性质" prop="projNature">
                <el-select v-model="projBascInfoShow.projNature">
                  <el-option v-for="item in jsxzList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="工程分类" class="input-inline">
                <el-select v-model="projBascInfoShow.projCategory">
                  <el-option v-for="item in gcflList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" label="拟开工时间" prop="nstartTime">
                <el-date-picker v-model="projBascInfoShow.nstartTime" type="date" placeholder="请选择拟开工时间"
                                format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd">
                </el-date-picker>
                <!--<el-input v-model="projBascInfoShow.nstartTime" type="hidden"></el-input>-->
                <input v-model="projBascInfoShow.nstartTime" type="hidden">
              </el-form-item>
              <el-form-item class="input-inline" label="拟建成时间" prop="endTime">
                <el-date-picker type="date" placeholder="请选择拟建成时间" format="yyyy 年 MM 月 dd 日" value-format="yyyy-MM-dd"
                                v-model="projBascInfoShow.endTime">
                </el-date-picker>
                <!--<el-input v-model="projBascInfoShow.endTime" type="hidden"></el-input>-->
                <input v-model="projBascInfoShow.endTime" type="hidden">
              </el-form-item>
              <el-form-item class="input-inline" label="总投资（万元）" prop="investSum">
                <el-input v-model="projBascInfoShow.investSum" placeholder="请输入总投资"></el-input>
              </el-form-item>
              <el-form-item class="input-inline" label="建筑面积（m&sup2;）" prop="buildAreaSum">
                <el-input v-model="projBascInfoShow.buildAreaSum" placeholder="请填写建筑面积"></el-input>
              </el-form-item>
              <el-form-item class="input-inline" label="用地面积（m&sup2;）" prop="xmYdmj">
                <el-input v-model="projBascInfoShow.xmYdmj" placeholder="请填写用地面积"></el-input>
              </el-form-item>
              <el-form-item class="input-inline" label="重点项目">
                <el-select v-model="projBascInfoShow.projLevel">
                  <el-option v-for="item in projLevelList" :key="item.id" :label="item.itemName" :value="item.itemCode">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item class="input-inline" prop="theIndustry">
                <template slot="label">
                  <el-tooltip class="item" effect="dark" content="国标行业以国家统计局发布的《国民经济行业分类》（GB/T 4754-2017）编码为基准。"
                              placement="right-start">
                    <i class="ag ag-help"></i>
                  </el-tooltip>
                  国标行业
                </template>
                <el-input v-model="gbhyShowMsg" readonly placeholder="请选择国标行业"
                          @click.native="isShowGbhy = true"></el-input>
                <div style="position: relative;" v-show="isShowGbhy">
                  <div class="gbhyTreeBox">
                    <div class="closeTree">
                      <i class="ag ag-close" @click="isShowGbhy=false"></i>
                    </div>
                    <div class="gbhyTree">
                      <el-tree
                          :data="gbhySelectData"
                          :props="gbhyProp"
                          node-key="itemCode"
                          show-checkbox
                          ref="gbhy"
                          @check-change="handleCheckChange">
                      </el-tree>
                    </div>
                  </div>
                </div>
                <!--<el-input v-model="projBascInfoShow.theIndustry" type="hidden"></el-input>-->
                <input v-model="projBascInfoShow.theIndustry" type="hidden">
              </el-form-item>
              <el-form-item class="input-inline" label="国标行业代码发布年代" prop="gbCodeYear">
                <el-input disabled v-model="projBascInfoShow.gbCodeYear" placeholder="请输入国标行业代码发布年代"></el-input>
              </el-form-item>
            </div>

            <el-form-item prop="scaleContent">
              <template slot="label">
                <el-tooltip class="item" effect="dark" content="对项目建设规模以及建设内容的文字描述。" placement="right-start">
                  <i class="ag ag-help"></i>
                </el-tooltip>
                建设规模及内容
              </template>
              <el-input v-model="projBascInfoShow.scaleContent" type="textarea" placeholder="请填写建设内容"></el-input>
            </el-form-item>

            <div class="clearfix" v-if="showMoreBaseInfo">
              <el-form-item label="项目地址" class="proj-addr">
                <el-input v-model="projBascInfoShow.projAddr" placeholder="请输入项目详细地址"></el-input>
              </el-form-item>
              <el-form-item label="四至范围" class="proj-addr-scope">
                <div class="proj-addr-item">
                  <span class="input-label">东至</span>
                  <el-input v-model="projBascInfoShow.eastScope" placeholder="请输入东至范围"></el-input>
                </div>
                <div class="proj-addr-item">
                  <span class="input-label">西至</span>
                  <el-input v-model="projBascInfoShow.westScope" placeholder="请输入西至范围"></el-input>
                </div>
                <div class="proj-addr-item">
                  <span class="input-label">南至</span>
                  <el-input v-model="projBascInfoShow.southScope" placeholder="请输入南至范围"></el-input>
                </div>
                <div class="proj-addr-item">
                  <span class="input-label">北至</span>
                  <el-input v-model="projBascInfoShow.northScope" placeholder="请输入北至范围"></el-input>
                </div>
              </el-form-item>
            </div>
          </el-form>
          <p class="more-base-info" @click="showMoreBaseInfo=!showMoreBaseInfo">{{showMoreBaseInfo?'隐藏更多':'显示更多'}}<i
              :class="showMoreBaseInfo?'el-icon-arrow-up':'el-icon-arrow-down'"></i></p>
          <el-button v-if="!isGuidePage" type="primary" icon="el-icon-wallet" class="fr"
                     @click="saveOrUpdateProjFrom(true)">保存
          </el-button>
        </el-collapse-item>
        <!--  基本信息  end  -->
        <template v-if="showMoreProjInfo">
          <!--<template>-->
          <!--  申办主体信息  start  -->
          <el-collapse-item name="2" id="applyInfo">
            <template slot="title">
              <i class="header-icon el-icon-info"></i>申报主体信息
            </template>
            <div class="checked-opt" v-if="!isGuidePage">
              <el-radio-group v-model="applySubjectType" @change="changeApplySubjectSelect">
                <el-radio-button :label="1" name="applySubject">&nbsp;企业&nbsp;</el-radio-button>
                <!--                <el-tooltip class="item" effect="dark" content="机关或事业单位" placement="top-start">-->
                <el-radio-button :label="2" name="applySubject">机关 / 事业单位</el-radio-button>
                <!--                </el-tooltip>-->
                <el-radio-button :label="0" name="applySubject">&nbsp;个人&nbsp;</el-radio-button>
              </el-radio-group>
              <el-switch class="is-jinban fr" v-show="applySubjectType!=0" v-model="agentChecked" inactive-text="是否经办">
              </el-switch>
            </div>
            <!--个人申报主体 start-->
            <el-form v-if="applySubjectType==0" ref="applyPerson" id="applyPerson" :model="applyPersonFrom">
              <el-form label-width="176px" class="clearfix" :model="applyPersonFrom" :rules="rulesApplyPersonForm"
                       ref="applicantPer">
                <input type="hidden" v-model="applyPersonFrom.applyLinkmanId">
                <input type="hidden" v-model="applyPersonFrom.linkLinkmanId">
                <p class="apply-info-title">申请人信息</p>
                <!--<el-col :span="24">
                  <el-form-item class="info-header" label="申请人信息">
                  </el-form-item>
                </el-col>-->
                <!-- 信用记录-->
                <div class="credit-box" v-show="applyPersonFrom.loseCreditCount>0">
                  <i class="credit-box-icon" :class="applyPersonFrom.isBlack?'el-icon-error':'el-icon-warning'"></i>
                  当前申请人{{applyPersonFrom.isBlack?'已被纳入信用黑名单':'有失信记录'}}，可点击右侧查看详细历史记录。
                  <span class="see-credit-btn fr" @click="creditDiaVisibleShow(applyPersonFrom)">查看信用记录</span>
                </div>
                <el-col :span="12">
                  <el-form-item label="申请人" prop="applyLinkmanName">
                    <el-autocomplete :trigger-on-focus="false" :fetch-suggestions="querySearchLinkMan"
                                     v-model="applyPersonFrom.applyLinkmanName" @select="querySearchApplyLinkMan"
                                     placeholder="请输入申请人姓名">
                      <el-button slot="append" v-if="!isGuidePage" @click.native="clearApplyLinkManInfo(true)"
                                 title="清空">清空
                      </el-button>
                    </el-autocomplete>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="申请人身份证号" prop="applyLinkmanIdCard">
                    <el-input v-model="applyPersonFrom.applyLinkmanIdCard" placeholder="请输入申请人身份证号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="申请人电话" prop="applyLinkmanTel">
                    <el-input v-model="applyPersonFrom.applyLinkmanTel" placeholder="请输入申请人电话">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="申请人邮箱">
                    <el-input v-model="applyPersonFrom.applyLinkmanEmail" id="apply_linkmanEmail"
                              placeholder="请输入申请人邮箱">
                    </el-input>
                  </el-form-item>
                </el-col>
                <p class="apply-info-title">联系人信息
                  <el-checkbox class="fr" v-model="sameAsApplyLink" @change="copyApplyLinkmanInfo">与申请人信息一致 <span
                      class="notice">（勾选后将自动获取联系人信息）</span></el-checkbox>
                </p>

                <el-col :span="12">
                  <el-form-item label="联系人" prop="linkLinkmanName">
                    <el-autocomplete :trigger-on-focus="false" :disabled="sameAsApplyLink"
                                     :fetch-suggestions="querySearchLinkMan" @select="querySearchLinkLinkMan"
                                     v-model="applyPersonFrom.linkLinkmanName" placeholder="请输入联系人姓名">
                      <el-button slot="append" v-if="!isGuidePage" @click.native="clearApplyLinkManInfo(false)"
                                 title="清空">清空
                      </el-button>
                    </el-autocomplete>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="联系人身份证号" prop="linkLinkmanIdCard">
                    <el-input :disabled="sameAsApplyLink" v-model="applyPersonFrom.linkLinkmanIdCard"
                              placeholder="请输入联系人身份证号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="联系人电话" prop="linkLinkmanTel">
                    <el-input :disabled="sameAsApplyLink" v-model="applyPersonFrom.linkLinkmanTel"
                              placeholder="请输入联系人电话"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="12">
                  <el-form-item label="联系人邮箱">
                    <el-input :disabled="sameAsApplyLink" v-model="applyPersonFrom.linkLinkmanEmail"
                              placeholder="请输入联系人邮箱">
                    </el-input>
                  </el-form-item>
                </el-col>
              </el-form>
              <el-col :span="24" class="ar" v-if="!isGuidePage">
                <el-form-item>
                  <el-button type="primary" icon="el-icon-wallet" @click="saveApplyAndLinkmanInfo()">保存</el-button>
                </el-form-item>
              </el-col>
            </el-form>
            <!--个人申报主体 end-->
            <!--企业申报主体 start-->
            <el-form v-if="applySubjectType==1 || applySubjectType==2">
              <el-form label-width="176px"
                       class="clearfix"
                       v-for="(jiansheFromItem,index) in jiansheFrom"
                       :ref="'jianshe_'+index"
                       :key="index"
                       :rules="rulesCompanyForm"
                       :model="jiansheFromItem">
                <p v-show="index==0" class="apply-info-title">建设单位</p>
                <!--v-show="agentChecked && (index==0)"-->
                <!-- 信用记录-->
                <div class="credit-box" v-show="jiansheFromItem.loseCreditCount>0">
                  <i class="credit-box-icon" :class="jiansheFromItem.isBlack?'el-icon-error':'el-icon-warning'"></i>
                  当前企业{{jiansheFromItem.isBlack?'已被纳入信用黑名单':'有失信记录'}}，可点击右侧查看详细历史记录。
                  <span class="see-credit-btn fr" @click="creditDiaVisibleShow(jiansheFromItem)">查看信用记录</span>
                </div>
                <input type="hidden" name="applyinstId" :value="jiansheFromItem.applyinstId">
                <input type="hidden" name="unitInfoId" :value="jiansheFromItem.unitInfoId">
                <input type="hidden" name="linkmanId" :value="jiansheFromItem.linkmanId">
                <el-col :span="11" class="fl">
                  <el-form-item label="单位类型" prop="unitType">
                    <el-select v-model="jiansheFromItem.unitType" disabled placeholder="请选择">
                      <el-option v-for="(item,indexOp) in xmdwlxList"
                                 :key="indexOp"
                                 :label="item.itemName"
                                 :value="item.itemCode"></el-option>
                    </el-select>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="统一社会信用代码" prop="unifiedSocialCreditCode">
                    <el-input v-model="jiansheFromItem.unifiedSocialCreditCode" placeholder="请输入统一社会信用代码"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="单位名称" prop="applicant">
                    <el-autocomplete :trigger-on-focus="false" :fetch-suggestions="querySearchJiansheName"
                                     @select="function(value) {selUnitInfo(value,'jianshe',index)}"
                                     v-model="jiansheFromItem.applicant" placeholder="请输入单位名称">
                    </el-autocomplete>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="单位地址" prop="applicantDetailSite">
                    <el-input v-model="jiansheFromItem.applicantDetailSite" placeholder="请输入单位地址"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="法定代表人" prop="idrepresentative">
                    <el-input v-model="jiansheFromItem.idrepresentative" placeholder="请输入法定代表人"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="法定代表人证件号">
                    <el-input v-model="jiansheFromItem.idno" placeholder="请输入法定代表人证件号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="联系人名称" no-data-text="暂无数据" prop="linkmanName" class="sel-btn">
                    <el-select v-model="jiansheFromItem.linkmanName" :loading="loadingLinkMan"
                               @click.native="getLinkManListByUnitId(jiansheFromItem)" required placeholder="--请选择--">
                      <el-option class="select-option-ul"
                                 v-for="(item2, index2) in jiansheFromItem.aeaLinkmanInfoList"
                                 :key="index2"
                                 :label="item2.addressName"
                                 @click.native="selLinkman(item2,index,true)"
                                 :value="item2.addressId">
                        <span class="fl">{{ item2.addressName }}</span>
                        <span class="fr el-icon-delete" @click.stop="delLinkman(item2,jiansheFromItem,index)"></span>
                      </el-option>
                    </el-select>
                    <el-button type="primary" class="add-link-man" icon="el-icon-circle-plus-outline"
                               @click="addLinkman('',jiansheFromItem);jingbanFlag=false" title="新增"></el-button>
                    <el-button icon="el-icon-edit-outline" type="primary" class="item-right-btn"
                               @click="addLinkman(jiansheFromItem,jiansheFromItem);jingbanFlag=false"
                               title="编辑"></el-button>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="联系人证件号" prop="linkmanCertNo">
                    <el-input v-model="jiansheFromItem.linkmanCertNo" disabled placeholder="请输入联系人证件号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="联系人手机" prop="linkmanMobilePhone">
                    <el-input v-model="jiansheFromItem.linkmanMobilePhone" disabled placeholder="请输入联系人手机号"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="联系人邮箱">
                    <el-input :id="'linkmanMail_'+index" v-model="jiansheFromItem.linkmanMail" disabled
                              placeholder="请输入联系人邮箱"></el-input>
                  </el-form-item>
                </el-col>
                <template v-if="showUnitMore.indexOf(index)>-1">
                  <el-col :span="11" class="fl">
                    <el-form-item label="工商登记号" prop="induCommRegNum">
                      <el-input v-model="jiansheFromItem.induCommRegNum" placeholder="请输入工商登记号"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="组织机构代码" prop="organizationalCode">
                      <el-input v-model="jiansheFromItem.organizationalCode" placeholder="请输入组织机构代码"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="纳税人识别号" prop="taxpayerNum">
                      <el-input v-model="jiansheFromItem.taxpayerNum" placeholder="请输入纳税人识别号"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="信用标记码" prop="creditFlagNum">
                      <el-input v-model="jiansheFromItem.creditFlagNum" placeholder="请输入信用标记码"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="注册资本（万元）" prop="registerCapital">
                      <el-input v-model="jiansheFromItem.registerCapital" placeholder="请输入注册资本"></el-input>
                    </el-form-item>
                  </el-col>

                  <el-col :span="11" class="fr">
                    <el-form-item label="注册登记机关" prop="registerAuthority">
                      <el-input v-model="jiansheFromItem.registerAuthority" placeholder="请输入注册登记机关"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="经营范围" prop="managementScope">
                      <el-input v-model="jiansheFromItem.managementScope" placeholder="请输入经营范围"></el-input>
                    </el-form-item>
                  </el-col>

                  <el-col :span="11" class="fr">
                    <el-form-item label="邮政编码" prop="postalCode">
                      <el-input v-model="jiansheFromItem.postalCode" placeholder="请输入邮政编码"></el-input>
                    </el-form-item>
                  </el-col>
                  <!--<el-col :span="24">-->
                  <!--<el-form-item label="行政区（园区）" prop="applicantDistrict">-->
                  <!--<el-input v-model="jiansheFromItem.applicantDistrict" placeholder="请输入行政区（园区）"></el-input>-->
                  <!--</el-form-item>-->
                  <!--</el-col>-->
                  <el-col :span="11" class="fl linkman-set">
                    <el-form-item label="人员设置" prop="induCommRegNum">
                      <el-row class="linkman-set-item" v-for="(type,index) in jiansheFromItem.linkmanTypes"
                              :key="index">
                        <el-col :span="2">
                          <el-button v-if="index==0&&!isGuidePage"
                                     icon="el-icon-circle-plus-outline"
                                     type="primary"
                                     class="item-left-btn"
                                     @click="addLinkmanTypes(jiansheFromItem.linkmanTypes)"
                                     title="新增"></el-button>
                          <el-button v-else-if="!isGuidePage"
                                     icon="el-icon-remove-outline"
                                     type="primary"
                                     @click="delLinkmanTypes(jiansheFromItem.linkmanTypes,index)"
                                     class="item-left-btn" title="删除"></el-button>

                        </el-col>
                        <el-col :span="11">
                          <el-select
                              v-model="type.linkmanType"
                              filterable
                              placeholder="请选中人员类型"
                              :loading="loadingUnitLinkMan">
                            <el-option
                                v-for="item in projUnitLinkmanType"
                                :key="item.itemId"
                                :label="item.itemName"
                                :value="item.itemCode">
                            </el-option>
                          </el-select>
                        </el-col>
                        <el-col :span="11">
                          <el-select
                              v-model="type.linkmanName"
                              filterable
                              placeholder="请选择联系人"
                              @click.native="getUnitLinkManList(jiansheFromItem)"
                              :loading="loadingUnitLinkMan">
                            <el-option
                                v-for="item in unitLinkManOptions"
                                :key="item.addressId"
                                @click.native="selTypeLinkman(type,item)"
                                :label="item.addressName"
                                :value="item.addressName">
                            </el-option>
                          </el-select>
                        </el-col>

                      </el-row>
                    </el-form-item>
                  </el-col>

                </template>
                <el-col :span="24" class="ar">
                  <p class="more-base-info" @click="setShowUnitMore(index)">
                    {{(showUnitMore.indexOf(index)>-1)?'隐藏更多':'显示更多'}}
                    <i :class="showMoreBaseInfo?'el-icon-arrow-up':'el-icon-arrow-down'"></i></p>
                  <el-form-item v-if="!isGuidePage">
                    <el-button type="primary" class="save-jansheUnit-info" icon="el-icon-wallet"
                               @click="saveProjinfoids(jiansheFromItem,index,'jianshe_')">保存
                    </el-button>
                    <el-button type="warning" icon="el-icon-delete"
                               @click="delUnitInfoProj(jiansheFromItem,index,'jianshe')">删除
                    </el-button>
                  </el-form-item>
                </el-col>
              </el-form>
              <el-col :span="24" class="ar" v-if="!isGuidePage">
                <el-form-item>
                  <el-button type="primary" size="small" plain @click="addUnitInfoForm(1)">+ 新增建设单位</el-button>
                </el-form-item>
              </el-col>
            </el-form>
            <!--企业申报主体 end-->
            <!--经办单位信息 start-->
            <el-form v-if="applySubjectType!=0&&agentChecked">
              <el-form label-width="176px"
                       class="clearfix"
                       :ref="'jingban_'+index"
                       :rules="rulesCompanyForm"
                       :key="index"
                       v-for="(jingbanUnitsItem,index) in agentUnits"
                       :model="jingbanUnitsItem">
                <p v-show="index==0" class="apply-info-title">经办单位</p>
                <input type="hidden" name="linkmanId" :value="jingbanUnitsItem.linkmanId">
                <input type="hidden" name="unitInfoId" :value="jingbanUnitsItem.unitInfoId">
                <el-col :span="11" class="fl">
                  <el-form-item label="单位类型" prop="unitType">
                    <el-select v-model="jingbanUnitsItem.unitType" placeholder="请选择">
                      <el-option v-for="(item,indexOp) in xmdwlxList"
                                 :key="indexOp"
                                 :disabled="item.itemCode==1"
                                 :label="item.itemName"
                                 :value="item.itemCode"></el-option>
                    </el-select>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="统一社会信用代码" prop="unifiedSocialCreditCode">
                    <el-input v-model="jingbanUnitsItem.unifiedSocialCreditCode" placeholder="请输入统一社会信用代码"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="单位名称" prop="applicant">
                    <el-autocomplete :trigger-on-focus="false" :fetch-suggestions="querySearchJiansheName"
                                     @select="function(value) {selUnitInfo(value,'jingban',index)}"
                                     v-model="jingbanUnitsItem.applicant" placeholder="请输入单位名称">
                    </el-autocomplete>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="单位地址" prop="applicantDetailSite">
                    <el-input v-model="jingbanUnitsItem.applicantDetailSite" placeholder="请输入单位地址"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="法定代表人" prop="idrepresentative">
                    <el-input v-model="jingbanUnitsItem.idrepresentative" placeholder="请输入法定代表人"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="法定代表人证件号">
                    <el-input v-model="jingbanUnitsItem.idno" placeholder="请输入法定代表人证件号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="联系人名称" prop="linkmanName" class="sel-btn">
                    <el-select no-data-text="暂无数据" v-model="jingbanUnitsItem.linkmanName" :loading="loadingLinkMan"
                               @click.native="getLinkManListByUnitId(jingbanUnitsItem)" required placeholder="--请选择--">
                      <el-option class="select-option-ul"
                                 v-for="(item2, index2) in jingbanUnitsItem.aeaLinkmanInfoList"
                                 :label="item2.linkmanName"
                                 :key="index2"
                                 @click.native="selLinkman(item2,index,false)"
                                 :value="item2.linkmanName">
                        <span class="fl">{{ item2.linkmanName }}</span>
                        <span class="fr el-icon-delete" @click.stop="delLinkman(item2,jingbanUnitsItem,index)"></span>
                      </el-option>
                    </el-select>
                    <el-button type="primary" class="add-link-man" icon="el-icon-circle-plus-outline"
                               @click="addLinkman('',jingbanUnitsItem);jingbanFlag=true" title="新增"></el-button>
                    <el-button icon="el-icon-edit-outline" type="primary" class="item-right-btn"
                               @click="addLinkman(jingbanUnitsItem,jingbanUnitsItem);jingbanFlag=true"
                               title="编辑"></el-button>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="联系人证件号" prop="linkmanCertNo">
                    <el-input v-model="jingbanUnitsItem.linkmanCertNo" disabled placeholder="请输入联系人证件号">
                    </el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fl">
                  <el-form-item label="联系人手机" prop="linkmanMobilePhone">
                    <el-input v-model="jingbanUnitsItem.linkmanMobilePhone" disabled placeholder="请输入联系人手机"></el-input>
                  </el-form-item>
                </el-col>
                <el-col :span="11" class="fr">
                  <el-form-item label="联系人邮箱">
                    <el-input v-model="jingbanUnitsItem.linkmanMail" disabled placeholder="请输入联系人邮箱"></el-input>
                  </el-form-item>
                </el-col>
                <template v-if="showUnitMore.indexOf(index)>-1">
                  <el-col :span="11" class="fl">
                    <el-form-item label="工商登记号" prop="induCommRegNum">
                      <el-input v-model="jingbanUnitsItem.induCommRegNum" placeholder="请输入工商登记号"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="组织机构代码" prop="organizationalCode">
                      <el-input v-model="jingbanUnitsItem.organizationalCode" placeholder="请输入组织机构代码"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="纳税人识别号" prop="taxpayerNum">
                      <el-input v-model="jingbanUnitsItem.taxpayerNum" placeholder="请输入纳税人识别号"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="信用标记码" prop="creditFlagNum">
                      <el-input v-model="jingbanUnitsItem.creditFlagNum" placeholder="请输入信用标记码"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="注册资本（万元）" prop="registerCapital">
                      <el-input v-model="jingbanUnitsItem.registerCapital" placeholder="请输入注册资本"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="注册登记机关" prop="registerAuthority">
                      <el-input v-model="jingbanUnitsItem.registerAuthority" placeholder="请输入注册登记机关"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fr">
                    <el-form-item label="经营范围" prop="managementScope">
                      <el-input v-model="jingbanUnitsItem.managementScope" placeholder="请输入经营范围"></el-input>
                    </el-form-item>
                  </el-col>
                  <el-col :span="11" class="fl">
                    <el-form-item label="邮政编码" prop="postalCode">
                      <el-input v-model="jingbanUnitsItem.postalCode" placeholder="请输入邮政编码"></el-input>
                    </el-form-item>
                  </el-col>
                  <!--<el-col :span="24" class="fl">-->
                  <!--<el-form-item label="行政区（园区）" prop="applicantDistrict">-->
                  <!--<el-input v-model="jingbanUnitsItem.applicantDistrict" placeholder="请输入行政区（园区）"></el-input>-->
                  <!--</el-form-item>-->
                  <!--</el-col>-->
                  <el-col :span="11" class="fl linkman-set">
                    <el-form-item label="人员设置">
                      <el-row class="linkman-set-item" v-for="(type,index) in jingbanUnitsItem.linkmanTypes"
                              :key="index">
                        <el-col :span="2">
                          <el-button v-if="index==0"
                                     icon="el-icon-circle-plus-outline"
                                     type="primary"
                                     class="item-left-btn"
                                     @click="addLinkmanTypes(jingbanUnitsItem.linkmanTypes)"
                                     title="新增"></el-button>
                          <el-button v-else
                                     icon="el-icon-remove-outline"
                                     type="primary"
                                     @click="delLinkmanTypes(jingbanUnitsItem.linkmanTypes,index)"
                                     class="item-left-btn" title="删除"></el-button>

                        </el-col>
                        <el-col :span="11">
                          <el-select
                              v-model="type.linkmanType"
                              filterable
                              placeholder="请选中人员类型"
                              :loading="loadingUnitLinkMan">
                            <el-option
                                v-for="item in projUnitLinkmanType"
                                :key="item.itemId"
                                :label="item.itemName"
                                :value="item.itemCode">
                            </el-option>
                          </el-select>
                        </el-col>
                        <el-col :span="11">
                          <el-select
                              v-model="type.linkmanName"
                              filterable
                              placeholder="请选择联系人"
                              @click.native="getUnitLinkManList(jingbanUnitsItem)"
                              :loading="loadingUnitLinkMan">
                            <el-option
                                v-for="item in unitLinkManOptions"
                                :key="item.addressId"
                                @click.native="selTypeLinkman(type,item)"
                                :label="item.addressName"
                                :value="item.addressName">
                            </el-option>
                          </el-select>
                        </el-col>

                      </el-row>
                    </el-form-item>
                  </el-col>
                </template>
                <el-col :span="24" class="ar">
                  <p class="more-base-info" @click="setShowUnitMore(index)">
                    {{(showUnitMore.indexOf(index)>-1)?'隐藏更多':'显示更多'}}
                    <i :class="showMoreBaseInfo?'el-icon-arrow-up':'el-icon-arrow-down'"></i></p>
                  <el-form-item v-if="!isGuidePage">
                    <el-button type="primary" class="save-jinbanUnit-info" icon="el-icon-wallet"
                               @click="saveProjinfoids(jingbanUnitsItem,index,'jingban_')">保存
                    </el-button>
                    <el-button type="warning" icon="el-icon-delete"
                               @click="delUnitInfoProj(jingbanUnitsItem,index,'jingban')">删除
                    </el-button>
                  </el-form-item>
                </el-col>
              </el-form>
              <el-col :span="24" class="ar" v-if="!isGuidePage">
                <el-form-item>
                  <el-button type="primary" size="small" plain @click="addUnitInfoForm(0)">+ 新增经办单位</el-button>
                </el-form-item>
              </el-col>
            </el-form>

            <!--经办单位信息 end-->
          </el-collapse-item>
          <!--  申办主体信息  end  -->
          <!--事项一单清 start-->
          <el-collapse-item name="3" id="applyStage">
            <template slot="title">
              <i class="header-icon el-icon-info"></i>事项一单清
            </template>
            <!--申报阶段 start-->
            <!--主题类型 start-->
            <p class="au-hint-text" v-if="isGuidePage"><i class="ag ag-warn-circle"></i>
              当前网厅申报处于部门辅导模式，需要对工程进行审核，可修改项目类型和事项，不可修改申报所属阶段。
            </p>
            <div class="col-status-z" :class="(colStatusActive==0)?'active':''" @click="setColStatusActive(0)">
              <p class="col-s-title content-center">选主题</p>
              <!--<div class="theme-type-list" v-show="themeList.length>1">-->
              <!--<span class="theme-type" style="width: 180px;" v-for="(item, index) in themeList"-->
              <!--:class="(themeTypeIndex==index)?'active':''" @click="changeThemeType(item,index,'single')">-->
              <!--{{item.themeTypeName}}-->
              <!--</span>-->
              <!--</div>-->
              <div class="apply-theme clearfix" v-if="themeTypeIndex==0">
                <div class="theme-list-item" v-if="selTheme.themeId">
                  <img class="text-left" src="../../apply/imgs/pro_type_4.png">
                  <span class="theme-name ellipsis">{{selTheme.themeName}}</span>
                </div>
                <div class="theme-list-item no-sel-theme" v-else>
                  <span @click="showSelThemeDialog"> <i class="el-icon-circle-plus-outline"></i>请选择并联审批主题类型</span>
                </div>
                <el-button style="margin-left: 10px;border-color: #169aff;color: #169aff;" circle icon="el-icon-refresh"
                           v-show="selTheme.themeId" @click="showSelThemeDialog"></el-button>
                <a :href="ctx+'rest/project/diagram/status/projInfo?projInfoId='+projInfoId"
                   target="_blank">
                  <el-button style="margin-left: 10px;border-color: #169aff;color: #169aff;" circle icon="el-icon-view">
                  </el-button>
                </a>

              </div>
              <div class="help-line-theme clearfix" v-else>
                <div class="theme-list-item" :class="selThemeActive1==index?'active':''"
                     @click="chooseTheme(item,index,'single');" v-for="(item,index) in themeInfoList">
                  <img class="text-left" :src="ctx+'apply/imgs/pro_type_4.png'">
                  <span class="theme-name ellipsisLn">{{item.themeName}}</span>
                </div>
              </div>
            </div>
            <!--主题类型 end-->
            <!--申报阶段或辅线服务 start-->
            <div class="col-status-z" :class="(colStatusActive==1)?'active':''" @click="setColStatusActive(1)"
                 v-show="statusLineList.length>1||statusList.length>0">
              <p class="col-s-title content-center">
                {{((statusLineList.length>1)&&(statusList.length>0))?'选阶段或服务':'选阶段'}}
              </p>
              <!--<div class="line-type" v-show="statusLineList.length>1">-->
              <!--<ul>-->
              <!--<li class="fl" v-for="(item,ind) in statusLineList" @click="selStatusLine(item,ind)"-->
              <!--:class="statusLineListActive==ind?'active':''">-->
              <!--{{item.title}}-->
              <!--</li>-->
              <!--</ul>-->
              <!--</div>-->
              <div class="status-img clearfix">
                <div class="status-img-item" v-for="(item,index) in statusList"
                     :class="statusActiveIndex==index?'active':''"
                     @click="selStatus(item,index,item.stageId,item.isSelItem, 'guideFlag')">
                  <div class="stage-img" :class="item.classIcon">
                    <img :src="ctx+item.bigImgPath" alt="">
                    <span v-if="item.helperStages.length>0"
                          class="helper-stages">{{item.helperStages[0].stageName}}</span>
                  </div>
                  <p class="stage-name ellipsis" :title="item.stageName">{{item.stageName}}</p>
                  <span class="applied-stage" v-if="item.stageState"
                        :class="item.stageState=='2'?'bg-green':item.stageState=='0'?'bg-gray':''">{{item.stageState=='2'?'已通过':item.stageState=='0'?'未申报':'进行中'}}</span>
                </div>
              </div>
            </div>
            <!--申报阶段或辅线服务 end-->
            <!--办理情形 start-->
            <div class="col-status-z" :class="(colStatusActive==2)?'active':''" @click="setColStatusActive(2)"
                 v-show="stateList.length>0&&!isGuidePage">
              <p class="col-s-title content-center">选情形</p>
              <div class="sel-status" v-if="stateList.length>0">
                <p class="m-font-gary">请选择情形：</p>
                <div id="parstatediv">
                  <el-form :model="stateSelVal">
                    <el-form-item class="sel-status-item" :required="item.mustAnswer==1"
                                  v-for="(item,index) in stateList" :key="index" :label="item.stateName">
                      <p class="status-label">
                        <el-tooltip class="item" effect="light" :content="item.stateMemo?item.stateMemo:'无'"
                                    placement="right">
                          <i class="el-icon-question"></i>
                        </el-tooltip>
                      </p>
                      <template v-if="item.answerType=='s'||item.answerType=='y'">
                        <el-radio-group v-model="item.selectAnswerId">
                          <el-radio v-for="(itemAns,ind) in item.answerStates"
                                    :key="ind"
                                    @change="getStatusStateMats(item,itemAns,itemAns.stageId,index,false)"
                                    :value="itemAns.parStateId" :label="itemAns.parStateId" name="answer">
                            {{itemAns.stateName}}
                          </el-radio>
                        </el-radio-group>
                      </template>
                      <template v-else>
                        <el-checkbox-group v-model="item.selectAnswerId" :required="item.mustAnswer==1">
                          <el-checkbox v-for="(itemAns,indAns) in item.answerStates" :key="indAns"
                                       :value="itemAns.parStateId"
                                       @change="function(value) {getStatusStateMats(item,itemAns,itemAns.stageId,index,false,value)}"
                                       :label="itemAns.parStateId" name="answer">{{itemAns.stateName}}
                          </el-checkbox>
                        </el-checkbox-group>
                      </template>
                    </el-form-item>
                  </el-form>
                </div>
              </div>
            </div>
            <!--办理情形  end-->
            <!--事项列表 start-->
            <div class="col-status-z" :class="(colStatusActive==3)?'active':''" @click="setColStatusActive(3)"
                 v-show="parallelItems.length>0||coreItems.length>0">
              <p class="col-s-title content-center">选要办理的事项清单</p>
              <div v-show="parallelItems.length>0">
                <div class="pro-core">
                  <!--                  <img :src="ctx+'apply/imgs/pro-core-icon-y.png'">-->
                  <span class="pro-core-title">并联审批事项</span>
                  <div class="fr pro-core-rigrt">
                    <span class="pro-core-card"><span class="is-catalog">标准</span>标准事项</span>
                    <span class="pro-core-card"><span class="is-catalog is-shishi">实施</span>实施事项</span>
                    <!--<span class="pro-core-card"><span class="is-catalog is-green">绿道</span>绿色通道</span>-->
                  </div>
                </div>
                <el-table class="items-table" v-loading="parallelLoading" id="parallelItemsTable"
                          ref="parallelItemsTable"
                          :data="parallelItems" border :expand-row-keys="showParallelItemsKey"
                          row-key="itemBasicId" tooltip-effect="dark" @select="parallelItemsSelItem"
                          @select-all="parallelItemsSelAll" :default-sort="{prop: 'sortNo', order: 'ascending'}"
                          style="width: 100%">
                  <el-table-column type="selection" :selectable='checkboxInit' align="center" v-if="!isGuidePage"
                                   width="55">
                  </el-table-column>
                  <el-table-column type="expand" width="5px" v-if="!parallelItemsQuestionFlag&&!isGuidePage">
                    <template slot-scope="scope">
                      <el-form :model="stateSelVal" class="expand-coreItem">
                        <el-form-item class="sel-status-item" :required="item.mustAnswer==1"
                                      v-if="item.itemShowFlag"
                                      v-for="(item,index) in scope.row.questionStates"
                                      :key="index" :label="item.stateName">
                          <p class="status-label">
                            <el-tooltip class="item" effect="light" :content="item.stateMemo?item.stateMemo:'无'"
                                        placement="right">
                              <i class="el-icon-question"></i>
                            </el-tooltip>
                          </p>
                          <template v-if="item.answerType=='s'||item.answerType=='y'">
                            <el-radio-group v-model="item.selectAnswerId">
                              <el-radio v-for="(itemAns,ind) in item.answerStates"
                                        :key="ind"
                                        v-if="itemAns.isProcStartCond!='1'"
                                        @change="getCoreItemsStateMats(scope.row,item,itemAns,index,'parallelItem')"
                                        :value="itemAns.itemStateId" :label="itemAns.itemStateId" name="answer">
                                {{itemAns.stateName}}
                              </el-radio>
                            </el-radio-group>
                          </template>
                          <template v-else>
                            <el-checkbox-group v-model="item.selectAnswerId" :required="item.mustAnswer==1">
                              <el-checkbox v-for="(itemAns,indAns) in item.answerStates"
                                           v-if="itemAns.isProcStartCond!='1'"
                                           :key="indAns" :value="itemAns.itemStateId"
                                           @change="function(value){getCoreItemsStateMats(scope.row,item,itemAns,index,'parallelItem',value)}"
                                           :label="itemAns.itemStateId" name="answer">{{itemAns.stateName}}
                              </el-checkbox>
                            </el-checkbox-group>
                          </template>
                        </el-form-item>
                      </el-form>
                    </template>
                  </el-table-column>
                  <el-table-column label="事项名称" prop="sortNo" sortable>
                    <template slot-scope="scope">
                      <span class="is-catalog" :class="scope.row.isCatalog!=1?'is-shishi':''">{{scope.row.isCatalog==1?'标准':'实施'}}</span>
                      <!--<span class="is-catalog is-green" v-show="scope.row.isGreenWay=='1'">绿道</span>-->
                      {{scope.row.itemName}}
                      <span v-show="scope.row.isDone=='FINISHED'" class="isTag isDone">
                        <!--<i class="ag ag-check-circle-fill"></i>-->
                        已通过</span>
                      <span v-show="scope.row.isDone=='AGREE_TOLERANCE'" class="isTag isDone">
                        <!--<i class="ag ag-edit-circle-fill"></i>-->
                        已通过</span>
                      <span v-show="scope.row.isDone=='HANDLING'" class="isTag isDoing">
                        <!--<i class="ag ag-edit-circle-fill"></i>-->
                        办理中</span>
                      <span
                          v-show="scope.row.isRecommend==1&&scope.row.isDone!='HANDLING'&&scope.row.isDone!='FINISHED'"
                          class="isTag isRecommend">推荐办理</span>
                      <p class="not-region-data" v-if="scope.row.itemHaved">* 该实施事项已存在，请勿重复选择!</p>
                      <p class="not-region-data" v-if="scope.row.notRegionData">* 该事项无匹配的行政区划及实施主体</p>
                    </template>
                  </el-table-column>
                  <!-- 非部门辅导表格列 -->
                  <template v-if="!isGuidePage">
                    <el-table-column label="行政区划" width="200">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择行政区划">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems"
                                       :key="indexOp"
                                       :label="item.regionName"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item)"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.regionName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                    <el-table-column prop="orgName" label="实施主体" width="340">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择实施主体">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                       :key="indexOp"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item)"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.orgName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                  </template>
                  <!-- 部门辅导表格列 -->
                  <template v-if="isGuidePage">
                    <el-table-column label="是否必选" prop="isDoneItem" width="80px" align="center">
                      <template slot-scope="scope">
                        {{scope.row.isDoneItem=='1'?"必选":"非必选"}}
                      </template>
                    </el-table-column>
                    <el-table-column prop="orgName" label="审批部门" width="160">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择实施主体">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                       :key="indexOp"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item)"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.orgName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                    <el-table-column label="智能引导" prop="intelliGuideChoose" width="80px" align="center">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.intelliGuideChoose" disabled></el-checkbox>
                      </template>
                    </el-table-column>
                    <el-table-column label="申请人选择" prop="applicantChoose" width="120">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.applicantChoose" disabled>
                          {{scope.row.applicantOpinion||'未填写'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 牵头部门结果 -->
                    <el-table-column label="牵头部门" prop="leaderDeptChoose" v-if="guideState>2&&guideState!=6" width="140">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.leaderDeptChoose" disabled>
                          {{scope.row.leanderDeptOpinion||'未填写意见'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 牵头部门填写意见 -->
                    <template v-if="leaderDept&&(guideState<3||guideState==6)">
                      <el-table-column label="牵头部门选择" prop="bmChecked" width="80px" align="center">
                        <template slot-scope="scope">
                          <el-checkbox v-model="scope.row.bmChecked"
                                       :disabled="scope.row.bmDisabled"></el-checkbox>
                        </template>
                      </el-table-column>
                      <el-table-column label="牵头部门意见" prop="opinion">
                        <template slot-scope="scope">
                          <el-input placeholder="填写意见" v-model="scope.row.opinion"
                                    :disabled="scope.row.bmDisabled"></el-input>
                        </template>
                      </el-table-column>
                    </template>
                    <!-- 审批部门结果 -->
                    <el-table-column v-if="guideState>3" label="审批部门" prop="approveDeptChoose" width="140">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.approveDeptChoose" disabled>
                          {{scope.row.approveDeptOpinion||'无意见'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 审批部门填写意见 -->
                    <template v-if="guideState==3">
                      <el-table-column label="审批部门选择" prop="bmChecked" width="80px" align="center">
                        <template slot-scope="scope">
                          <el-checkbox v-model="scope.row.bmChecked"
                                       :disabled="scope.row.bmDisabled"></el-checkbox>
                        </template>
                      </el-table-column>
                      <el-table-column label="审批部门意见" prop="opinion">
                        <template slot-scope="scope">
                          <el-input placeholder="暂无意见" v-model="scope.row.opinion"
                                    :disabled="scope.row.bmDisabled"></el-input>
                        </template>
                      </el-table-column>
                    </template>
                  </template>
                </el-table>
                <p class="more-base-info" v-if="noptItemShowNum>0&&noptItemShowNum < parallelItems.length"
                   @click="changeItenShowLen('parallel')">
                  {{(parallelItemsShowCount < parallelItems.length)?'显示更多':'隐藏更多'}}
                  <i :class="(parallelItemsShowCount < parallelItems.length)?'el-icon-arrow-down':'el-icon-arrow-up'"></i>
                </p>
              </div>
              <div v-show="coreItems.length>0">
                <div class="pro-core">
                  <!--                  <img :src="ctx+'apply/imgs/pro-core-icon-b.png'">-->
                  <span class="pro-core-title">并行推进事项</span>
                  <div class="fr pro-core-rigrt" v-show="parallelItems.length==0">
                    <span class="pro-core-card"><span class="is-catalog">标准</span>标准事项</span>
                    <span class="pro-core-card"><span class="is-catalog is-shishi">实施</span>实施事项</span>
                    <!--<span class="pro-core-card"><span class="is-catalog is-green">绿道</span>绿色通道</span>-->
                  </div>
                </div>
                <el-table class="items-table" ref="coreItemsTable" id="coreItemsTable" :data="coreItems" border
                          tooltip-effect="dark"
                          :default-sort="{prop: 'sortNo', order: 'ascending'}" :expand-row-keys="showCoreItemsKey"
                          row-key="itemBasicId" @select="coreItemsSelItem" @select-all="coreItemsSelAll"
                          style="width: 100%">
                  <el-table-column type="selection" :selectable='checkboxInit' align="center" width="55"
                                   v-if="!isGuidePage" :key="Math.random()">
                  </el-table-column>
                  <el-table-column type="expand" width="5px" v-if="coreItemQuestionFlag&&!isGuidePage">
                    <template slot-scope="scope">
                      <el-form :model="stateSelVal" class="expand-coreItem">
                        <el-form-item class="sel-status-item" :required="item.mustAnswer==1"
                                      v-for="(item,index) in scope.row.questionStates" :key="index"
                                      :label="item.stateName">
                          <p class="status-label">
                            <el-tooltip class="item" effect="light" :content="item.stateMemo?item.stateMemo:'无'"
                                        placement="right">
                              <i class="el-icon-question"></i>
                            </el-tooltip>
                          </p>
                          <template v-if="item.answerType=='s'||item.answerType=='y'">
                            <el-radio-group v-model="item.selectAnswerId">
                              <el-radio v-for="(itemAns,ind) in item.answerStates"
                                        :key="ind"
                                        @change="getCoreItemsStateMats(scope.row,item,itemAns,index,'coreItem')"
                                        :value="itemAns.itemStateId" :label="itemAns.itemStateId" name="answer">
                                {{itemAns.stateName}}
                              </el-radio>
                            </el-radio-group>
                          </template>
                          <template v-else>
                            <el-checkbox-group v-model="item.selectAnswerId" :required="item.mustAnswer==1">
                              <el-checkbox v-for="(itemAns,indAns) in item.answerStates" :key="indAns"
                                           :value="itemAns.itemStateId"
                                           @change="function(value){getCoreItemsStateMats(scope.row,item,itemAns,index,'coreItem',value)}"
                                           :label="itemAns.itemStateId" name="answer">{{itemAns.stateName}}
                              </el-checkbox>
                            </el-checkbox-group>
                          </template>
                        </el-form-item>
                      </el-form>
                    </template>
                  </el-table-column>
                  <el-table-column :key="Math.random()" label="事项名称" prop="sortNo" sortable>
                    <template slot-scope="scope">
                      <span class="is-catalog"
                            :class="scope.row.isCatalog!=1?'is-shishi':''">{{scope.row.isCatalog==1?'标准':'实施'}}</span>
                      <!--<span class="is-catalog is-green" v-show="scope.row.isGreenWay=='1'">绿道</span>-->
                      {{scope.row.itemName}}
                      <span v-show="scope.row.isDone=='FINISHED'" class="isTag isDone">
                        <!--<i class="ag ag-check-circle-fill"></i>-->
                        已通过</span>
                      <span v-show="scope.row.isDone=='AGREE_TOLERANCE'" class="isTag isDone">
                        <!--<i class="ag ag-edit-circle-fill"></i>-->
                        已通过</span>
                      <span v-show="scope.row.isDone=='HANDLING'" class="isTag isDoing">
                        <!--<i class="ag ag-edit-circle-fill"></i>-->
                        办理中</span>
                      <span
                          v-show="scope.row.isRecommend==1&&scope.row.isDone!='HANDLING'&&scope.row.isDone!='FINISHED'"
                          class="isTag isRecommend">推荐办理</span>
                      <p class="not-region-data" v-if="scope.row.itemHaved">* 该实施事项已存在，请勿重复选择!</p>
                      <p class="not-region-data" v-if="scope.row.notRegionData">* 该事项无匹配的行政区划及实施主体</p>
                    </template>
                  </el-table-column>
                  <!-- 非部门辅导表格列 -->
                  <tempplate v-if="!isGuidePage">
                    <el-table-column :key="Math.random()" label="行政区划" width="200">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择行政区划">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.regionName"
                                       :key="indexOp"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item, 'core')"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.regionName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                    <el-table-column :key="Math.random()" prop="orgName" label="实施主体" width="340">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择实施主体">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                       :key="indexOp"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item,'croe')"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.orgName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                  </tempplate>
                  <!-- 部门辅导表格列 -->
                  <template v-if="isGuidePage">
                    <el-table-column :key="Math.random()" label="是否必选" prop="isDoneItem" width="80px" align="center">
                      <template slot-scope="scope">
                        {{scope.row.isDoneItem=='1'?"必选":"非必选"}}
                      </template>
                    </el-table-column>
                    <el-table-column :key="Math.random()" prop="orgName" label="审批部门" width="160">
                      <template slot-scope="scope">
                        <div v-if="scope.row.isImplement==false">
                          <el-select v-model="scope.row.implementItemVerId"
                                     placeholder="请选择实施主体">
                            <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                       :key="indexOp"
                                       @click.native="getItemOrgId(scope.row,scope.$index,item)"
                                       :value="item.itemVerId"></el-option>
                          </el-select>
                        </div>
                        <div v-else>
                          <span>{{scope.row.orgName}}</span>
                        </div>
                      </template>
                    </el-table-column>
                    <el-table-column :key="Math.random()" label="智能引导" prop="intelliGuideChoose" width="80px"
                                     align="center">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.intelliGuideChoose" disabled></el-checkbox>
                      </template>
                    </el-table-column>
                    <el-table-column :key="Math.random()" label="申请人选择" prop="applicantChoose" width="120">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.applicantChoose" disabled>
                          {{scope.row.applicantOpinion||'未填写'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 牵头部门结果 -->
                    <el-table-column :key="Math.random()" label="牵头部门" prop="leaderDeptChoose" v-if="guideState>2&&guideState!=6"
                                     width="140">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.leaderDeptChoose" disabled>
                          {{scope.row.leanderDeptOpinion||'未填写意见'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 牵头部门填写意见 -->
                    <template v-if="leaderDept&&(guideState<3||guideState==6)">
                      <el-table-column :key="Math.random()" label="牵头部门选择" prop="bmChecked" width="80px" align="center">
                        <template slot-scope="scope">
                          <el-checkbox v-model="scope.row.bmChecked"
                                       :disabled="scope.row.bmDisabled"></el-checkbox>
                        </template>
                      </el-table-column>
                      <el-table-column :key="Math.random()" label="牵头部门意见" prop="opinion">
                        <template slot-scope="scope">
                          <el-input placeholder="填写意见" v-model="scope.row.opinion"
                                    :disabled="scope.row.bmDisabled"></el-input>
                        </template>
                      </el-table-column>
                    </template>
                    <!-- 审批部门结果 -->
                    <el-table-column :key="Math.random()" v-if="guideState>3" label="审批部门" prop="approveDeptChoose"
                                     width="140">
                      <template slot-scope="scope">
                        <el-checkbox v-model="scope.row.approveDeptChoose" disabled>
                          {{scope.row.approveDeptOpinion||'无意见'}}
                        </el-checkbox>
                      </template>
                    </el-table-column>
                    <!-- 审批部门填写意见 -->
                    <template v-if="!leaderDept&&guideState==3">
                      <el-table-column :key="Math.random()" label="审批部门选择" prop="bmChecked" width="80px" align="center">
                        <template slot-scope="scope">
                          <el-checkbox v-model="scope.row.bmChecked"
                                       :disabled="scope.row.bmDisabled"></el-checkbox>
                        </template>
                      </el-table-column>
                      <el-table-column :key="Math.random()" label="审批部门意见" prop="opinion">
                        <template slot-scope="scope">
                          <el-input placeholder="暂无意见" v-model="scope.row.opinion"
                                    :disabled="scope.row.bmDisabled"></el-input>
                        </template>
                      </el-table-column>
                    </template>
                  </template>
                </el-table>
                <p class="more-base-info" v-if="optItemShowNum>0&&optItemShowNum < coreItems.length"
                   @click="changeItenShowLen('core')">
                  {{(coreItemsShowCount < coreItems.length)?'显示更多':'隐藏更多'}}
                  <i :class="(coreItemsShowCount < coreItems.length)?'el-icon-arrow-down':'el-icon-arrow-up'"></i>
                </p>
              </div>
              <!--部门辅导展示所有部门和状态-->
              <div v-if="isGuidePage&&guideState>2" class="guide-org-list">
<!--                <div class="state-ex c-f">-->
<!--                  <div class="org-state-e now"></div>-->
<!--                  <div class="g-text">当前部门</div>-->
<!--                  <div class="org-state-e ing"></div>-->
<!--                  <div class="g-text">待确认部门</div>-->
<!--                  <div class="org-state-e finish ag ag-check"></div>-->
<!--                  <div class="g-text">已确认部门</div>-->
<!--                </div>-->
                <div class="g-org-box c-f">
                  <i class="l-icon"></i>
                  <div v-for="u in guideOrgList"
                       class="org-state-e c-f" :class="[guideStateToClass(u)]">
                    <div class="gs-i"><i class="ag ag-check"></i></div>
                    <span>{{u.orgName}}</span>
                    <span class="y-line"></span>
                    <template v-if="u.state==1" data-title="部门确认">
                      <span>待确认 {{u.notEnsureNum}}</span>
                      <span class="xy-line">/</span>
                      <span>已确认 {{u.ensureNum}}</span>
                    </template>
                    <span v-if="u.state==0" date-title="全部未确认">
                     待确认 {{u.notEnsureNum}}
                    </span>
                    <span v-if="u.state==2" date-title="全部已确认">
                     确认完成 {{u.allNum}}
                    </span>
                  </div>
                </div>
              </div>
              <!--部门辅导牵头部门意见展示-->
              <div v-if="isGuidePage&&(guideState==4||guideState==5)" class="guide-finish-box">
                <div class="g-f-title">牵头部门意见</div>
                <div class="g-f-opinon">
                  {{guideDetail.aeaHiGuide.leaderOrgOpinion||'无意见'}}
                </div>
              </div>
            </div>
            <!--事项列表 end-->
          </el-collapse-item>
          <!--事项一单清 end-->
          <!--一张表单 start-->
          <el-collapse-item name="4" v-if="oneFormData.length>0&&selTheme&&selTheme.themeId&&!isGuidePage" id="oneForm"
                            class="clearfix one-form-collapse">
            <template slot="title">
              <i class="header-icon el-icon-edit-outline"></i>一张表单
            </template>
            <div style="padding-right:40px;">
              <div @click="showOneFormList=!showOneFormList" class="toggle-form-icon ag"
                   :class="[showOneFormList?'ag-up':'ag-down']"></div>
              <div class="of-u-states" @click="openOneFormDialog(allFormInfoList[0])">
                <div class="of-u-icon ag ag-edit"></div>
                <span>{{oneFormData[0].oneformName}}</span>
                <div class="of-u-state-box r c-f">
                  <div class="of-u-b-text l">总共</div>
                  <div class="of-u-b-number l">{{formAllNum}}</div>
                  <div class="of-u-b-text l">已填</div>
                  <div class="of-u-b-number green l">{{formFilledNum}}</div>
                  <div class="of-u-b-text l">未填</div>
                  <div class="of-u-b-number yellow l">{{formUnFillNum}}</div>
                </div>
              </div>
              <el-collapse-transition>
                <div class="c-f" v-show="showOneFormList">
                  <div class="one-form-unit" v-for="u in allFormInfoList"
                       @click="openOneFormDialog(u)" :class="{'is-fill': u.isFilled}">
                    <div class="form-ul-icon">
                      <i class="of-state-icon ag ag-edit"></i>
                    </div>
                    <div class="form-ubr-icon"></div>
                    <div class="one-form-title" :title="u.partformName">{{u.formName}}</div>
                    <span class="goto-fill-form" v-if="!u.isFilled">去填写</span>
                    <span class="of-fill-time" v-if="u.isFilled">{{u.createTime|formatDate}}完成</span>
                  </div>
                </div>
              </el-collapse-transition>
            </div>
            <!--            <div class="of-u-states">-->
            <!--              <div class="of-u-icon ag ag-edit"></div>-->
            <!--              <span>{{oneFormData[0].oneformName}}</span>-->
            <!--              <div class="of-u-state-box r c-f">-->
            <!--                <div class="of-u-b-text l">总共</div>-->
            <!--                <div class="of-u-b-number l">{{formAllNum}}</div>-->
            <!--                <div class="of-u-b-text l">已填</div>-->
            <!--                <div class="of-u-b-number green l">{{formFilledNum}}</div>-->
            <!--                <div class="of-u-b-text l">未填</div>-->
            <!--                <div class="of-u-b-number yellow l">{{formUnFillNum}}</div>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--            <div class="c-f">-->
            <!--              <div class="one-form-unit" v-for="u in allFormInfoList"-->
            <!--                   @click="openOneFormDialog(u)" :class="{'is-fill': u.isFilled}">-->
            <!--                <i class="of-state-icon ag" :class="!u.isFilled?'ag-edit-circle-fill':'ag-check-circle-fill'"></i>-->
            <!--                <div class="one-form-title" :title="u.partformName">{{u.formName}}</div>-->
            <!--                <span class="goto-fill-form" v-if="!u.isFilled">去填写</span>-->
            <!--                <span class="of-fill-time" v-if="u.isFilled">{{u.createTime|formatDate}}</span>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--            <div class="fl" v-for="item in oneFormData" @click="showOneFormDialog(item.oneformName)">-->
            <!--              <p class="one-form-name ellipsis">-->
            <!--                <span class="icon el-icon-edit-outline"></span>-->
            <!--                {{item.oneformName}}-->
            <!--                <span v-show="item.filledOut==1" class="isTag isDone"><i class="el-icon-success"></i>已填</span>-->
            <!--              </p>-->
            <!--            </div>-->
          </el-collapse-item>
          <!--一张表单 end-->
          <!--材料一单清 start-->
          <el-collapse-item name="5" id="matsList" v-show="selTheme&&selTheme.themeId&&!isGuidePage">
            <template slot="title">
              <i class="header-icon el-icon-info"></i>材料一单清
            </template>
            <div class="fileDiv" v-loading="loadingFile" element-loading-text="文件上传中"
                 element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.3)"
                 :class="this.AllFileList.length>0?'is-sel-file':''">
              <el-upload ref="uploadFile" class="upload-flie" :auto-upload="false" drag :show-file-list="false"
                         :file-list="fileList" :action="ctx+'rest/mats/att/upload/auto'" multiple
                         :http-request="myUploadFile"
                         :on-change="fileChange">
                <i slot="trigger" v-show="this.AllFileList.length>0" class="el-icon-plus"></i>
                <el-button class="submit-file" v-show="this.AllFileList.length>0" size="small" type="primary"
                           @click="submitUpload">一键自动分拣
                </el-button>
                <div class="el-upload__text" v-show="this.AllFileList.length==0">或将文件直接拖入这里，支持上传后自动分拣</div>
                <el-button v-show="this.AllFileList.length==0" slot="trigger" size="small" type="primary">选择文件
                </el-button>
              </el-upload>
              <div class="flie-list-che file-list-ul" v-show="this.AllFileList.length>0">
                <el-checkbox-group v-model="checkedSelFlie" class="check-item" @change="handleCheckedCitiesChange">
                  <el-checkbox v-for="(item,index) in AllFileList" :label="item.name" :key="item.uid">
                    <span><i class="el-icon-document"></i>{{item.name}}</span>
                  </el-checkbox>
                </el-checkbox-group>
                <el-checkbox class="check-all fr" v-model="checkAll" @change="handleCheckAllChange">全选</el-checkbox>
              </div>
            </div>
            <el-form :rules="model.rules" :model="model" ref="formTest">
              <el-table :data="model.matsTableData" row-key="matId" class="mats-table"
                        :expand-row-keys="showFileListKey" style="width: 100%">
                <el-table-column align="center" label="序号" width="55">
                  <template slot-scope="scope">
                    <span>{{scope.$index+1}}</span>
                    <!--                  <span>{{scope.row.sortNo}}</span>-->
                  </template>
                </el-table-column>
                <el-table-column type="expand" v-if="showMatTableExpand" width="20" align="right">
                  <template slot-scope="scope">
                    <!--                    <span>{{scope.row}}</span>-->
                    <div class="mat-children" v-if="showMatTableExpand&&scope.row.certChild.length>0">
                      <div v-for="(item,index) in scope.row.certChild" class="file-list-tab">
                        <span class="file-name">
                          <span class="cert-icon icon ag ag-id-card"></span>
                          {{item.certName}}
                        </span>
                        <span class="file-icon-btn">
                          <span title="查看" class="ag ag-preview" @click="cretPreview(item.authCode)"></span>
                          <span title="解除关联" class="el-icon-delete"
                                @click="unbindCert(item.matinstId,scope.row.certChild,index)"></span>
                        </span>
                      </div>
                    </div>
                    <div class="mat-children" v-if="showMatTableExpand&&scope.row.matChild.length>0">
                      <div v-for="item in scope.row.matChild" class="file-list-tab">
                        <span class="file-name">
                          <span class="icon ag ag-filetype-doc"
                                :class="'ag-filetype-'+getFileType(item.fileName)"></span>
                          {{item.fileName}}
                        </span>
                        <span class="file-icon-btn">
                          <span title="预览" class="el-icon-search" @click="filePreview(item)"></span>
                          <span title="查看源文件" class="ag ag-preview" @click="filePreview1(item)"></span>
                          <span title="下载" class="el-icon-download" @click="downOneFile(item)"></span>
                          <span title="删除" class="el-icon-delete" @click="delOneFile(item,scope.row)"></span>
                        </span>
                      </div>
                    </div>
                    <div class="mat-children" v-if="scope.row.certChild.length==0&&scope.row.matChild.length==0">
                      <div class="file-list-tab no-file">暂无附件</div>
                    </div>
                  </template>
                </el-table-column>

                <el-table-column prop="matName" label="材料名称" min-width="220">
                  <template slot-scope="scope">
                    <span>{{scope.row.matName}}
                      <i class="cert-icon ag ag-id-card" v-if="scope.row.matProp=='c'"></i>
                      <span class="children-count"
                            v-if="scope.row.matChild.length>0">（{{scope.row.matChild.length}}）</span>
                    </span>
                  </template>
                </el-table-column>
                <el-table-column label="收件要点" align="center" width="80">
                  <template slot-scope="scope">
                    <el-tooltip class="item custor" effect="light" :content="scope.row.reviewKeyPoints"
                                placement="right">
                      <span class="el-icon el-icon-search"></span>
                    </el-tooltip>
                  </template>
                </el-table-column>
                <el-table-column align="center" label="要点示例" width="80">
                  <template slot-scope="scope">
                    <el-popover class="custor" placement="right" width="60" trigger="hover">
                      <p class="notice-pop" @click="showMatFiles(scope.row.matId,'TEMPLATE_DOC')">空表</p>
                      <p class="notice-pop" @click="showMatFiles(scope.row.matId,'SAMPLE_DOC')">样表</p>
                      <p class="notice-pop" @click="showMatFiles(scope.row.matId,'REVIEW_SAMPLE_DOC')">收件样本</p>
                      <i slot="reference" class="el-icon el-icon-more"></i>
                    </el-popover>
                  </template>
                </el-table-column>
                <el-table-column align="center" label="是否容缺" width="80">
                  <template slot-scope="scope">
                    <span :class="(scope.row.zcqy!='0')?'text-green':''">{{(scope.row.zcqy=='0')?'否':'是'}}</span>
                  </template>
                </el-table-column>
                <el-table-column label="纸质件" align="center">
                  <el-table-column label="原件" align="center">
                    <el-table-column prop="duePaperCount" align="center" label="份数" width="60">
                    </el-table-column>
                    <el-table-column prop="realPaperCount" align="center" label="收/验" width="70">
                      <template slot-scope="scope">
                        <el-form-item :prop="'matsTableData.' + scope.$index + '.realPaperCount'"
                                      :rules='(scope.row.zcqy==0&&scope.row.paperIsRequire==1&&scope.row.realPaperCount>0)?model.rules.realPaperCount:model.rules.realPaperCount1'>

                          <el-input size="mini" v-model="scope.row.realPaperCount"></el-input>
                        </el-form-item>
                      </template>
                    </el-table-column>
                    <el-table-column align="center" width="98">
                      <template slot-scope="scope" slot="header">
                        <el-checkbox v-model="getPaperAll" @change="function(val) {checkAllMatChange(val,'paper')}">全选
                        </el-checkbox>
                      </template>
                      <template slot-scope="scope">
                        <el-form-item :prop="'matsTableData.' + scope.$index + '.getPaper'"
                                      :rules='(scope.row.zcqy==0&&scope.row.paperIsRequire==1&&scope.row.realPaperCount>0)?model.rules.getPaper:[]'>
                          <el-checkbox v-model="scope.row.getPaper" :key="scope.row.matinstId"
                                       @change="function(value) { checkedMatChange(value,scope.$index,'paper')}">已收/验
                          </el-checkbox>
                        </el-form-item>
                      </template>
                    </el-table-column>
                  </el-table-column>
                  <el-table-column label="复印件" align="center">
                    <el-table-column prop="dueCopyCount" align="center" label="份数" width="60">
                    </el-table-column>
                    <el-table-column prop="realCopyCount" align="center" label="收/验" width="70">
                      <template slot-scope="scope">
                        <el-form-item :prop="'matsTableData.' + scope.$index + '.realCopyCount'"
                                      :rules='(scope.row.realPaperCount==0&&scope.row.zcqy==0&&scope.row.paperIsRequire==1&&scope.row.realCopyCount>0)?model.rules.realCopyCount:[]'>
                          <el-input size="mini" v-model="scope.row.realCopyCount"></el-input>
                        </el-form-item>
                      </template>
                    </el-table-column>
                    <el-table-column align="center" width="98">
                      <template slot-scope="scope" slot="header">
                        <el-checkbox v-model="getCopyAll" @change="function(val) { checkAllMatChange(val,'copy')}">全选
                        </el-checkbox>
                      </template>
                      <template slot-scope="scope">
                        <el-form-item :prop="'matsTableData.' + scope.$index + '.getCopy'"
                                      :rules='(scope.row.realPaperCount==0&&scope.row.zcqy==0&&scope.row.paperIsRequire==1&&scope.row.realCopyCount>0)?model.rules.getCopy:[]'>
                          <el-checkbox v-model="scope.row.getCopy" :key="scope.row.matinstId"
                                       @change="function(value) { checkedMatChange(value,scope.$index,'copy')}">已收/验
                          </el-checkbox>
                        </el-form-item>
                      </template>
                    </el-table-column>
                  </el-table-column>
                </el-table-column>
                <el-table-column label="电子件" align="center">
                  <el-table-column align="center" label="必须" width="60">
                    <template slot-scope="scope">
                    <span
                        :class="(scope.row.attIsRequire==1)?'text-green':''">{{(scope.row.attIsRequire==1)?'是':'否'}}</span>
                    </template>
                  </el-table-column>
                  <el-table-column label="操作" width="180" align="center">
                    <template slot-scope="scope">
                      <div style="text-align: left !important;">
                        <span class="op-btn" @click="showUploadWindow(scope.row)">上传</span>
                        <span class="op-btn" @click="showUploadWindow(scope.row,'history')">材料库</span>
                        <span class="op-btn" v-if="scope.row.matProp=='c'"
                              @click="showUploadWindow(scope.row,'certList')">证照库</span>
                        <span class="op-btn" v-if="scope.row.matProp=='f'"
                              @click="showOneFormDialog1(scope.row)">填写</span>
                      </div>
                    </template>
                  </el-table-column>
                </el-table-column>
              </el-table>
            </el-form>
          </el-collapse-item>
          <!--材料一单清 end-->
          <!--办证结果取件方式 start-->
          <el-collapse-item name="6" id="getResult" v-show="selTheme&&selTheme.themeId&&!isGuidePage">
            <template slot="title">
              <i class="header-icon el-icon-info"></i>办证取件方式
            </template>
            <el-form :model="getResultForm" :rules="(getResultForm.receiveMode==1)?rulesResultForm:rulesResultForm1"
                     ref="resultForm" label-width="176px" class="get-result-form">
              <input type="hidden" value="getResultForm.id">
              <el-form-item label="签收方式" prop="receiveMode">
                <el-radio-group v-model="getResultForm.receiveMode" @change="changeReceiveMode">
                  <el-radio :label="0">邮政快递</el-radio>
                  <el-radio :label="1">窗口取证</el-radio>
                </el-radio-group>
              </el-form-item>
              <el-form-item label="领取方式" prop="receiveType">
                <el-radio-group v-model="getResultForm.receiveType">
                  <el-radio :label="1">一次领取</el-radio>
                  <el-radio :label="0">分别领取</el-radio>
                </el-radio-group>
              </el-form-item>
              <el-form-item label="快递类型" prop="smsType" v-if="getResultForm.receiveMode==0">
                <el-radio-group v-model="getResultForm.smsType">
                  <el-radio :label="1">上门取件</el-radio>
                  <el-radio :label="2">普通快递</el-radio>
                </el-radio-group>
              </el-form-item>
              <div class="clearfix">
                <el-form-item class="input-inline" label="收件人名字" prop="addresseeName">
                  <el-autocomplete :trigger-on-focus="false" :fetch-suggestions="querySearchLinkMan"
                                   v-model="getResultForm.addresseeName" @select="queryGetResultMan"
                                   placeholder="请输入收件人名字">
                  </el-autocomplete>
                  <!--<el-input v-model="getResultForm.addresseeName" placeholder="请输入收件人名字"></el-input>-->
                </el-form-item>
                <el-form-item class="input-inline" label="收件人联系方式" prop="addresseePhone">
                  <el-input v-model="getResultForm.addresseePhone" placeholder="请输入收件人联系方式"></el-input>
                </el-form-item>
              </div>
              <el-form-item label="收件人身份证" prop="addresseeIdcard">
                <el-input v-model="getResultForm.addresseeIdcard" placeholder="请输入收件人身份证"></el-input>
              </el-form-item>
              <el-form-item label="收件人所在区域" required v-if="getResultForm.receiveMode==0">
                <el-select v-model="getResultForm.addresseeProvince" prop="addresseeProvince" placeholder="--请选择省--">
                  <el-option v-for="(item,index) in provinceList" :key="item.code" :label="item.name"
                             @click.native.stop="queryCityData(index)" :value="item.code">
                  </el-option>
                </el-select>
                <el-select v-model="getResultForm.addresseeCity" prop="addresseeCity" placeholder="--请选择市--">
                  <el-option v-for="(item,index) in cityList" :key="item.code" :label="item.name"
                             @click.native.stop="queryAreaData(index)" :value="item.code">
                  </el-option>
                </el-select>
                <el-select v-model="getResultForm.addresseeCounty" prop="addresseeCounty"
                           @change="$set(getResultForm, getResultForm.addresseeCounty, $event)" placeholder="--请选择区--">
                  <el-option v-for="(item,index) in countyList" :key="item.code" :label="item.name" :value="item.code">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="收件人详细地址" prop="addresseeAddr" v-if="getResultForm.receiveMode==0">
                <el-input type="textarea" v-model="getResultForm.addresseeAddr" placeholder="请输入收件人详细地址"></el-input>
              </el-form-item>
            </el-form>
            <el-button class="fr" type="primary" icon="el-icon-wallet" @click="saveSmsinfo">保存</el-button>
          </el-collapse-item>
          <!--办证结果取件方式 end-->
          <!--是否设置为绿色通道 start-->
          <el-collapse-item name="7" id="isGreenWay" v-show="selTheme&&selTheme.themeId&&!isGuidePage">
            <template slot="title">
              <i class="header-icon el-icon-info"></i>其他设置
            </template>
            <el-checkbox v-model="isGreenWay">
              设为绿色通道（图例：<span class="is-circle-green">绿</span>）
            </el-checkbox>
          </el-collapse-item>
          <!--是否设置为绿色通道 end-->
        </template>
      </el-collapse>
      <div class="right-bottom-btn" v-if="showMoreProjInfo&&!isGuidePage">
        <template v-if="isAgentPage">
          <el-button type="success" circle @click="seeAgreement">查看委<br/>托协议</el-button>
<!--          <el-button type="danger" circle @click="clickStopAgreement">终止<br/>协议</el-button>-->
        </template>
        <template v-else>
          <el-button v-if="showSolicitBtn" type="success" @click="openSoDialog" circle>意见<br/>征求</el-button>
          <el-button type="danger" :disabled="!stageFrontCheckFlag" circle @click="showCommentDialog('3')">不予<br/>受理
          </el-button>
          <el-button circle :disabled="!stageFrontCheckFlag" @click="showCommentDialog('5')">材料<br/>补全</el-button>
          <el-button circle :disabled="!stageFrontCheckFlag" @click="showCommentDialog('1')">打印<br/>回执</el-button>
          <el-button :disabled="!stageFrontCheckFlag" circle @click="showCommentDialog('4','stash')">暂存</el-button>
        </template>
        <el-button type="primary" :disabled="!stageFrontCheckFlag" circle @click="showCommentDialog('0')">发起<br/>申报
        </el-button>
      </div>
      <div class="right-bottom-btn" v-if="isGuidePage">
        <template v-if="leaderDept">
          <!--牵头部门按钮-->
          <template v-if="guideState==2||guideState==1">
            <el-button type="success" circle @click="openSoDialog">发起部<br/>门确认</el-button>
            <el-button circle @click="leaderDeptPass">直接<br/>通过</el-button>
          </template>
          <template v-else-if="guideState==6">
            <el-button type="success" circle @click="leaderDeptPass(true)">结束部<br/>门确认</el-button>
            <el-button circle @click="openSoDialog">添加征<br/>询确认</el-button>
          </template>
        </template>
        <template v-if="bmCanGuide">
          <!--审批部门按钮-->
          <el-button type="success" circle @click="bmGuideEnsure">部门<br/>确认</el-button>
        </template>
      </div>
      <!--项目树窗口 start-->
      <el-dialog title="工程管理" :visible.sync="projectTreeInfoModal" class="proj-tree-dialog"
                 @closed="clearTreeChildInfo()" width="750px">
        <div class="project-tree">
          <div class="search-proj" v-if="!addChildProjShow">
            <el-input suffix-icon="el-icon-search" :inline="true" placeholder="输入关键字" v-model="searchProjfilterText" style="width: 68%;">
            </el-input>
            <el-button @click="clearProjfilterText">清空</el-button>
            <el-button icon="el-icon-connection" type="primary" v-if="isAgentPage" @click="splitEngineFn">拆分工程</el-button>
          </div>
          <div class="search-proj" v-else>
            <el-input :inline="true" placeholder="请输入子项目工程名称" v-model="childProjName">
            </el-input>
            <el-input :inline="true" placeholder="请输入子项目工程备注" v-model="childProjText">
            </el-input>
            <el-select v-if="dybzspjdxh.length > 1" v-model="stageFlag">
              <el-option v-for="(item,index) in dybzspjdxh"
                         :key="index"
                         :label="item=='1'?'立项用地阶段':item=='2'?'规划许可阶段':item=='3'?'施工许可阶段':item=='4'?'竣工验收阶段':'并行推进'"
                         :value="item"></el-option>
            </el-select>
            <el-button type="primary" :loading="addChildLoading" @click="saveAddChildProj()">确认</el-button>
            <el-button type="danger" @click="addChildProjShow=false">取消</el-button>
          </div>

          <el-tree :data="projTree" :props="projTreeDefaultProps" default-expand-all show-checkbox
                   :expand-on-click-node="false" :check-on-click-node="true" highlight-current
                   @node-click="selChildProj"
                   @node-contextmenu="showRightBtnList" :check-strictly="true" :filter-node-method="filterProjNode"
                   ref="projTree">
            <span class="custom-tree-node" slot-scope="scope">
              <span class="tree-icon-name">
                <i
                    :class="scope.data.icon?scope.data.icon:scope.data.children?'el-icon-folder-opened':'el-icon-tickets'"></i>{{ scope.data.name}}
              </span>
            </span>
          </el-tree>
          <div class="tree-right-btn" v-show="treeRightBtnList" :style="{top:treeBtnTop+'px',left:treeBtnLeft+'px'}">
            <a href="javascript:void(0);" class="list-group-item" @click="addChildChildProj();"
               v-if="isCreateSubproj=='1'">
              <i class="el-icon-circle-plus-outline"></i>新增子工程
            </a>
            <a href="javascript:void(0);" class="list-group-item" @click="delChildChildProj();">
              <i class="el-icon-delete"></i>删除子工程
            </a>
          </div>
        </div>
      </el-dialog>
      <!--项目树窗口 end-->
       <!--项目树窗口 start-->
      <el-dialog title="拆分工程" :visible.sync="splitEngineDialogVisiable" class="split-engine-dialog" :inline="true"
        width="980px">
        <el-form :model="splitForm" :rules="splitRules" label-width="180px" ref="splitForm">
          <h4>项目信息</h4>
          <el-form-item class="w100" label="项目代码">
            <el-input placeholder="请输入项目代码" disabled :value="projBascInfoShow.localCode"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="项目名称">
            <el-input placeholder="请输入项目名称" disabled :value="projBascInfoShow.projName"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="项目总投资（万元）">
            <el-input placeholder="请输入项目总投资" disabled :value="projBascInfoShow.investSum"></el-input>
          </el-form-item>
          <h4>单项工程信息</h4>
          <el-form-item class="w50" label="所处阶段" prop="stageNo">
            <el-select placeholder="请选择" v-model="splitForm.stageNo">
              <el-option label="工程建设许可阶段" value="1"></el-option>
              <el-option label="施工许可阶段" value="2"></el-option>
            </el-select>
          </el-form-item>
          <el-form-item class="w50" label="前阶段关联工程代码" prop="stageNo">
            <el-input placeholder="请输入前阶段关联工程代码" v-model="splitForm.lastGcbm"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="单项工程名称" prop="childProjName">
            <el-input placeholder="请输入单项工程名称" v-model="splitForm.childProjName"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="工程范围" prop="childForeignManagement">
            <el-input placeholder="请输入工程范围" v-model="splitForm.childForeignManagement"></el-input>
          </el-form-item>
          <el-form-item class="w100" label="单项工程投资额（万元）" prop="childProjInvestSum">
            <el-input placeholder="请输入单项工程投资额" style="width: 37.4%;" v-model="splitForm.childProjInvestSum"></el-input>
          </el-form-item>
          <el-form-item class="w100" label="单项工程建设规模" prop="childScaleContent">
            <el-input placeholder="请输入单项工程建设规模" type="textarea" v-model="splitForm.childScaleContent"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="用地面积（m&sup2;）" prop="childXmYdmj">
            <el-input placeholder="请输入用地面积" v-model="splitForm.childXmYdmj"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="建筑面积（m&sup2;）" prop="childBuildAreaSum">
            <el-input placeholder="请输入建筑面积" v-model="splitForm.childBuildAreaSum"></el-input>
          </el-form-item>
          <h4>申报单位信息</h4>
          <el-form-item class="w50" label="申报单位类型" prop="unitType">
            <el-select placeholder="请选择" v-model="splitForm.unitType">
              <el-option v-for="(item,index) in applyUnitTypeOptions" :key="item.id" :label="item.itemName"
                :value="item.itemCode"></el-option>
            </el-select>
          </el-form-item>
          <el-form-item class="w50" label="项目单位名称" prop="unitName">
            <el-input placeholder="默认引用项目单位信息，可修改" v-model="splitForm.unitName"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="证件类型" prop="certType">
            <el-select placeholder="请选择" v-model="splitForm.certType">
              <el-option label="组织机构代码" value="1"></el-option>
              <el-option label="统一社会信用代码" value="2"></el-option>
              <el-option label="纳税人识别号" value="3"></el-option>
            </el-select>
          </el-form-item>
          <el-form-item class="w50" label="证件编号" prop="certCode">
            <el-input placeholder="默认引用项目单位信息，可修改" v-model="splitForm.certCode"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="法人姓名" prop="idrepresentative">
            <el-input placeholder="默认引用项目单位信息，可修改" v-model="splitForm.idrepresentative"></el-input>
          </el-form-item>
          <el-form-item class="w50" label="联系电话" prop="idmobile">
            <el-input placeholder="默认引用项目单位信息，可修改" v-model="splitForm.idmobile"></el-input>
          </el-form-item>
        </el-form>
        <div class="hendel-box">
          <el-button type="primary" @click="saveSplitFormData">保 存</el-button>
        </div>
      </el-dialog>
       <!--项目树窗口 end-->
      <!--新增编辑联系人 start-->
      <el-dialog :title="addEditManModalTitle" :visible.sync="addEditManModalShow" width="750px"
                 class="dg-modal-add-linkmain-info" @close="resetForm('addEditManform')">
        <el-form :model="addEditManform" ref="addEditManform" label-width="180px" :rules="addLinkManRules">
          <el-form-item label="所在单位：" required>
            <el-select v-model="addEditManform.unitName" placeholder="请选择单位">
              <el-option v-for="(item,index) in unitInfoIdList" :key="index" :label="item.applicant"
                         :value="item.unitInfoId"></el-option>
            </el-select>
          </el-form-item>
          <el-form-item label="联系人姓名：" prop="linkmanName">
            <el-input v-model="addEditManform.linkmanName" placeholder="请输入联系人姓名"></el-input>
          </el-form-item>
          <el-form-item label="证件号：" prop="linkmanCertNo">
            <el-input v-model="addEditManform.linkmanCertNo" placeholder="请输入联系人证件号"></el-input>
          </el-form-item>
          <el-form-item label="手机号码：" prop="linkmanMobilePhone">
            <el-input v-model="addEditManform.linkmanMobilePhone" placeholder="请输入联系人手机号码"></el-input>
          </el-form-item>
          <el-form-item label="办公电话：">
            <el-input v-model="addEditManform.linkmanOfficePhon"></el-input>
          </el-form-item>
          <el-form-item label="传真：">
            <el-input v-model="addEditManform.linkmanFax"></el-input>
          </el-form-item>
          <el-form-item label="电子邮件：">
            <el-input v-model="addEditManform.linkmanMail"></el-input>
          </el-form-item>
          <el-form-item label="联系人住址：">
            <el-input v-model="addEditManform.linkmanAddr"></el-input>
          </el-form-item>
          <el-form-item label="备注：">
            <el-input v-model="addEditManform.linkmanMemo"></el-input>
          </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
          <el-button @click="addEditManModalShow = false">取 消</el-button>
          <el-button type="primary" @click="saveAeaLinkmanInfo('u')">确 定</el-button>
        </div>
      </el-dialog>
      <!--新增编辑联系人 end-->
      <!--选择主题 start-->
      <el-dialog title="选择主题" :visible.sync="selThemeDialogShow" width="750px">
        <div class="theme-content" :style="{maxHeight:curHeight-380+'px',overflow: 'auto',}">
          <div class="themeTypeList">
            <span class="theme-type" :class="themeDialogIndex==index?'active':''"
                  @click="changeThemeType(item,index,'parallel')"
                  :key="index"
                  v-for="(item,index) in parallelThemeList">
              {{item.themeTypeName}}
            </span>
          </div>
          <div class="pro-type-item"
               :class="selThemeActive==ind?'active':''"
               v-for="(item,ind) in themeInfoListP"
               :key="ind"
               @click="chooseTheme(item,ind,'parallel');">
            <img class="text-left" src="../../apply/imgs/pro_type_4.png">
            <span class="theme-name ellipsis">{{item.themeName}}</span>
          </div>
        </div>
      </el-dialog>
      <!--选择主题 end-->
      <!--样本弹窗 start-->
      <el-dialog title="查看样本" :visible.sync="showMatFilesDialogShow" width="750px">
        <div class="mat-file-list" v-html="dialogHtml"></div>
        <div slot="footer" class="dialog-footer">
          <el-button @click="showMatFilesDialogShow = false">关 闭</el-button>
        </div>
      </el-dialog>
      <!--样本弹窗 end-->
      <!--文件上传下载弹窗 start-->
      <el-dialog v-loading="loadingFileWin" element-loading-text="文件上传中"
                 element-loading-spinner="el-icon-loading" element-loading-background="rgba(0, 0, 0, 0.3)"
                 class="upload-flie-dialog" :title="showUploadWindowTitle" :visible.sync="showUploadWindowFlag"
                 @closed="uploadTableData=[]" width="750px">
        <div class="upload-file-content">
          <div class="file-opt-btn" v-if="showUploadWindowBtn">
            <el-button type="primary" @click="downloadFile()">下载</el-button>
            <el-upload ref="uploadFileWin" class="upload-s-file" :action="ctx+'rest/mats/att/upload'"
                       :show-file-list="false" :http-request="debounceHandler" multiple :file-list="fileList">
              <el-button slot="trigger" size="small" type="primary">上传</el-button>
            </el-upload>
            <el-button type="primary" @click="delSelectFileCom()">删除</el-button>
            <el-button type="primary" @click="openPhotoWindow(selMatRowData,'lt')">良田拍照</el-button>
            <el-button type="primary" @click="openPhotoWindow(selMatRowData,'fz')">方正拍照</el-button>
          </div>
          <el-table :data="uploadTableData"
                    ref="uploadTableData"
                    row-key="fileId"
                    border @selection-change="selectionFileChange">
            <el-table-column type="selection" align="center" width="55">
            </el-table-column>
            <el-table-column prop="fileName" label="文件名"></el-table-column>
            <el-table-column label="操作" align="center" width="310">
              <template slot-scope="scope">
                <el-button type="primary" :loading="loading" size="mini" @click="filePreview(scope.row)">预览</el-button>
                <el-button type="primary" size="mini" @click="filePreview1(scope.row)">查看源文件</el-button>

                <el-button type="primary" size="mini" :disabled="getFileType(scope.row.fileName)!=='pdf'"
                           @click="filePreview(scope.row,'pdf')">查看施工图
                </el-button>
              </template>
            </el-table-column>
          </el-table>
        </div>
      </el-dialog>
      <th:block th:include="common/fz_gaopaiyi :: fzGaoPaiYi"/>
      <th:block th:include="common/lt_gaopaiyi :: ltGaoPaiYi"/>
      <!--文件上传下载弹窗 end-->
      <!--证照库弹窗 start-->
      <el-dialog class="upload-flie-dialog" title="证照列表" :visible.sync="showCertWindowFlag"
                 @closed="certMatTableData=[]" width="900px">
        <div class="upload-file-content">
          <div class="file-opt-btn">
            <el-form :inline="true" :model="searchInline">
              <el-form-item label="申报主体">
                <el-select v-model="searchInline.type" placeholder="选择申报主体">
                  <el-option v-for="(item,index) in allApplySubjectInfo" :key="index"
                             @click.native="applySubjectChange(item)" :label="item.applySubjectName"
                             :value="item.applySubjectName"></el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="" v-if="searchInline.showNumberType">
                <el-radio-group v-model="searchInline.identityNumberType" @change="identityNumberTypeChange">
                  <el-radio label="0">企业证照</el-radio>
                  <el-radio label="1">法人证照</el-radio>
                </el-radio-group>
              </el-form-item>
            </el-form>
          </div>
          <el-table :data="certMatTableData" ref="certMatTableData" border>
            <el-table-column prop="name" label="证照名称"></el-table-column>
            <el-table-column prop="license_type" label="证照类型" width="100">
              <template slot-scope="scope">
                {{$options.filters.formatLicenseType(scope.row.license_type)}}
              </template>
            </el-table-column>
            <el-table-column prop="expiry_date" label="有效截止日期" width="180"></el-table-column>
            <el-table-column prop="trust_level" label="可信等级" width="80"></el-table-column>
            <el-table-column label="证照状态" width="140">
              <template slot-scope="scope">
                {{$options.filters.formatLicenseStatus(scope.row.license_status)}}
              </template>
            </el-table-column>
            <el-table-column label="操作" width="120">
              <template slot-scope="scope">
                <span class="op-btn" @click="cretPreview(scope.row.auth_code)">查看</span>
                <span class="op-btn" v-if="scope.row.bind==false" @click="setCretLinked(scope.row)">关联</span>
                <span class="op-btn" v-else style="cursor: not-allowed">已关联</span>
                <!--<span class="op-btn" v-else @click="unbindCert(scope.row.matinstId,selMatRowData.certChild,index)">解除关联</span>-->

              </template>
            </el-table-column>
          </el-table>
        </div>
      </el-dialog>
      <!--证照库弹窗 end-->
      <!--导入电子材料弹窗 start-->
      <el-dialog class="upload-flie-dialog" title="材料附件" :visible.sync="getFileListWindowFlag" width="750px">
        <div class="upload-file-content">
          <div class="file-opt-btn search-proj">
            <el-input suffix-icon="el-icon-search" :inline="true" placeholder="输入关键字" v-model="searchFileListfilter">
            </el-input>
            <el-button @click="searchFileListfilter=''">清空</el-button>
            <el-button type="primary" @click="fileImport">导入</el-button>
          </div>
          <el-table :data="shareFileList" border ref="shareFileList">
            <el-table-column type="selection" align="center" width="55">
            </el-table-column>
            <el-table-column prop="attName" label="文件名"></el-table-column>
            <el-table-column label="操作" align="center" width="150">
              <template slot-scope="scope">
                <el-button type="primary" size="mini" @click="filePreview(scope.row)">预览</el-button>
              </template>
            </el-table-column>
          </el-table>
        </div>
      </el-dialog>
      <!--导入电子材料弹窗 end-->
      <!--申报意见弹窗 start-->
      <el-dialog class="submit-comments" :title="submitCommentsTitle" :visible.sync="submitCommentsFlag" width="750px">
        <div class="comments-content">
          <p class="com-header">{{submitCommentsType=='3'?'不予受理意见':'收件意见'}}</p>
          <el-row>
            <el-col :span="16">
              <el-select v-model="selComment" @change="changeUserComment" placeholder="请选择">
                <el-option
                    v-for="(item,index) in commentsList"
                    :key="index"
                    :label="item.opinionContent"
                    :value="item.opinionContent">
                </el-option>
              </el-select>
            </el-col>
            <el-col :span="8">
              <el-button @click="setUseComment()">设为常用意见</el-button>
              <el-button @click="mUseComments()">管理</el-button>
            </el-col>
          </el-row>
          <el-row>
            <el-col :span="24">
              <el-input type="textarea" v-model="comments"></el-input>
            </el-col>
          </el-row>
          <el-row v-if="showMatList">
            <el-col :span="24">
              <el-select v-model="selectMat" multiple placeholder="请选择不予受理的材料" @change="getSelectedMat">
                <el-option v-for="(item, index) in model.matsTableData" :key="item.matId" :label="item.matName"
                           :value="item.matName">
                  <span class="fl">{{ index+1 }}：</span>
                  <span class="fl">{{ item.matName }}</span>
                </el-option>
              </el-select>
            </el-col>
          </el-row>
        </div>
        <div slot="footer" class="dialog-footer">
          <el-button @click="submitCommentsFlag = false">取 消</el-button>
          <el-button type="primary" @click="startParalleApprove()">发送</el-button>
        </div>
        <el-dialog title="常用意见管理" append-to-body class="edit-comments" :visible.sync="submitCommentsFlag1"
                   width="700px">
          <el-table :data="commentsList">
            <el-table-column property="opinionContent" label="常用意见"></el-table-column>
            <el-table-column property="_handle" label="操作" width="150" class="handle-icon">
              <template slot-scope="scope">
                <span title="编辑" class="el-icon-edit" @click="editComment(scope.row)"></span>
                <span title="删除" class="el-icon-delete" @click="deleteUseComment(scope.row.opinionId)"></span>
              </template>
            </el-table-column>
          </el-table>
          <el-dialog title="编辑常用意见" append-to-body class="edit-comments" :visible.sync="submitCommentsFlag2"
                     width="600px">
            <el-form :model="commentInfo" label-width="100px">
              <el-form-item label="意见">
                <el-input type="textarea" v-model="commentInfo.comment" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="排序号">
                <el-input type="number" v-model="commentInfo.sort" autocomplete="off"></el-input>
              </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer">
              <el-button @click="submitCommentsFlag2 = false">关闭</el-button>
              <el-button type="primary" @click="updateComment()">保存</el-button>
            </div>
          </el-dialog>
        </el-dialog>
      </el-dialog>
      <!--申报意见弹窗 end-->
      <!--回执列表弹窗 start-->
      <el-dialog title="回执列表" @closed="reloadPage()" :visible.sync="receiveModalShow" :close-on-click-modal="false"
                 :close-on-press-escape="false" class="receive-modal" width="80%" :style="{height: curHeight+'px'}">
        <div class="fl" :style="{height: (curHeight-150)+'px'}">
          <div class="receive-item"
               :class="receiveActive==ind?'active':''"
               :key="ind"
               v-for="(item,ind) in receiveList">
            <p class="receive-item-header">
              <span :title="item.name" class="ellipsis">{{item.name}}</span>
              <i class="fr icon" :class="item.show?'el-icon-arrow-down':'el-icon-arrow-right'"
                 @click="toggleReceiveListShow(item)"></i>
              <span class="fr"
                    :class="item.isSeries==0?'receive-type-y':'receive-type'">{{item.isSeries==0?'并联':'并行'}}</span>
            </p>
            <ul class="receive-list" v-show="item.show">
              <li :class="receiveItemActive==index?'active':''"
                  :key="index"
                  v-for="(itemBtn,index) in item.receiveList"
                  @click="printReceive1(itemBtn,index,ind)">
                <!--<span>{{(itemBtn.receiptType==2)?'收件回执':(itemBtn.receiptType==1)?'物料回执':(itemBtn.receiptType==3)?'不受理回执':'其他回执'}}</span>-->
                <span>{{$options.filters.changeReceiveType(itemBtn.receiptType)}}</span>
              </li>
            </ul>
          </div>
        </div>
        <div class="pdf-view-win" :style="{height: (curHeight-144)+'px'}">
          <iframe :src="pdfSrc" width="100%" height="100%"></iframe>
        </div>
      </el-dialog>
      <!--回执列表弹窗 end-->


      <!--分局承办部门组织树窗口 start-->
      <el-dialog title="选择分局机构"
                 :visible.sync="orgTreeInfoModal"
                 class="org-tree-dialog"
                 @closed="clearTreeChildInfo()"
                 width="750px">
        <div class="project-tree">
          <div class="search-proj" v-if="!addChildProjShow">
            <el-input suffix-icon="el-icon-search" :inline="true" placeholder="输入关键字" v-model="searchOrgfilterText">
            </el-input>
            <el-button @click="clearProjfilterText">清空</el-button>
          </div>
          <el-tree :data="orgTree" :props="projTreeDefaultProps" default-expand-all highlight-current
                   @node-click="selChildOrg" :filter-node-method="filterProjNode" ref="orgTree">
            <span class="custom-tree-node" slot-scope="scope">
              <span class="tree-icon-name">
                <i class="el-icon-s-order"></i>{{ scope.data.name}}
              </span>
            </span>
          </el-tree>
        </div>
      </el-dialog>
      <!--分局承办部门组织树窗口 end-->
      <!--  进度条  start-->
      <el-dialog class="show-loading-prog" fullscreen :show-close="false" :close-on-press-escape="false"
                 @closed="uploadPercentage=0"
                 :close-on-click-modal="false" :visible.sync="progressDialogVisible">
        <el-progress type="circle" :width="110" :stroke-width="10" :format="formatUploadPercentage"
                     :percentage="uploadPercentage"></el-progress>
      </el-dialog>
      <!--  一张表单  start-->
      <el-dialog @closed="uploadPercentage=0;progressDialogVisible=false" class="show-one-form" title="一张表单"
                 :close-on-press-escape="false" :close-on-click-modal="false"
                 :width="(curWidth-20)+'px'" :visible.sync="oneFormDialogVisible">
        <!--<el-button type="primary" style="margin-left: 20px"><a target="_blank" :href="ctx+'rest/oneform/common/renderPage?applyinstId='+parallelApplyinstId+'&stageId='+stageId+'&'+formItemsIdStr+'&showBasicButton=false&includePlatformResource=true'">打印表单</a></el-button>-->
        <div :style="{height:(curHeight-64)+'px',overflow: 'auto'}">
          <el-tabs tab-position="left" v-model="oneformActiveName">
            <el-tab-pane v-for="(item,index) in allFormInfoList"
                         :name="item.formId" :key="index" :label="item.formName">
              <iframe :style="{height:(curHeight-68)+'px',overflow: 'auto',width:'100%'}"
                      v-if="!item.smartForm"
                      :src="ctx+item.formUrl" frameborder="0"></iframe>
              <div v-else :style="{height:(curHeight-68)+'px',overflow: 'auto',width:'100%','padding-right':'10px'}">
                <div :id="'formHtml_'+index"></div>
                <div class="right-bottom-btn">
                  <el-button type="primary" circle>
                    <a target="_blank"
                       :href="ctx+'rest/oneform/common/renderPage?applyinstId='+parallelApplyinstId+'&stageId='+stageId+'&'+formItemsIdStr+'&showBasicButton=false&includePlatformResource=true'">
                      打印<br/>表单
                    </a>
                  </el-button>
                  <el-button circle @click="oneFormDialogVisible=false">关闭<br/>窗口</el-button>
                </div>
              </div>
            </el-tab-pane>
          </el-tabs>
        </div>
      </el-dialog>
      <!--  一张表单  end-->
      <!--  材料一张表单  start-->
      <el-dialog @closed="uploadPercentage=0;progressDialogVisible=false" class="show-mat-form"
                 :title="oneformNameTitle"
                 width="750px" :visible.sync="matFormDialogVisible">
        <div>
          <div id="matFormContent"></div>
        </div>
      </el-dialog>
      <!--  材料一张表单  end-->
      <!-- 材料补全dialog -->
      <el-dialog @closed="isGetReceiveList()" title="材料补全" :visible.sync="isShowMatmend"
                 class="dialog mertial-supplement-dialog" width="80%">
        <!-- 标签（正在补件的显示） -->
        <div class="supplement-tag" v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">
          正在补件中...
        </div>
        <el-form :inline="true" :model="matMendForm" :rules="supplementFormRules" label-width="140px"
                 class="demo-form-inline supplement-form" ref="matMendForm" v-loading="sloading">
          <el-form-item class="half-item" label="办件流水号">
            <!-- <el-input placeholder="请输入办件流水号" v-model="matMendForm.applyinstCode" disabled></el-input> -->
            <span class="color-999">{{matMendForm.applyinstCode || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="项目编号">
            <!-- <el-input placeholder="请输入项目编号" v-model="matMendForm.localCode" disabled></el-input> -->
            <span class="color-999">{{matMendForm.localCode || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="项目名称">
            <!-- <el-input placeholder="请输入项目名称" v-model="matMendForm.projInfoName" disabled></el-input> -->
            <span class="color-999">{{matMendForm.projInfoName || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="客户名称">
            <!-- <el-input placeholder="请输入客户名称" v-model="matMendForm.owner" disabled></el-input> -->
            <span class="color-999">{{matMendForm.owner || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="审批事项名称">
            <!-- <el-input placeholder="请输入审批事项名称" v-model="matMendForm.iteminstName" disabled></el-input> -->
            <span class="color-999">{{matMendForm.iteminstName || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="负责部门名称">
            <!-- <el-input placeholder="请输入负责部门名称" v-model="matMendForm.approveOrgName" disabled></el-input> -->
            <span class="color-999">{{matMendForm.approveOrgName || '暂无'}}</span>
          </el-form-item>
          <el-form-item class="half-item" label="办理期限(工作日)" prop="correctDueDays">
            <span class="color-999" v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{matMendForm.correctDueDays || '暂无'}}</span>
            <el-input placeholder="请输入办理期限" type="number" min="0" v-else
                      v-model="matMendForm.correctDueDays"></el-input>
          </el-form-item>
          <el-form-item class="fill-item" :label="inSeletcedMaterialPandel? '待补全材料清单':'已收清单列表'">
            <!--已收清单列表-->
            <template v-if="!inSeletcedMaterialPandel">
              <el-row class="material-table-header">
                <el-col class="header-item" :span="8">材料名称</el-col>
                <el-col class="header-item" :span="2">类型</el-col>
                <el-col class="header-item" :span="4">应收（份）</el-col>
                <el-col class="header-item" :span="8">已收（份）</el-col>
                <el-col class="header-item" :span="2">操作</el-col>
              </el-row>
              <div class="material-table-wrap">
                <el-row class="material-table content-center"
                        v-for="(item,index) in submittedMats"
                        :key="item.matId">
                  <el-col :span="8" class="tb-title inline-block"><p>{{item.matName}}</p></el-col>
                  <el-col :span="16" class="tb-content inline-block">
                    <el-row class="tb-item" v-if="item.paperCount>0">
                      <el-col :span="3" class="inline-block show-span">原件</el-col>
                      <el-col :span="6" class="inline-block show-span">{{item.paperCount || '0'}}</el-col>
                      <el-col :span="12" class="inline-block show-span">{{item.realPaperCount || '0'}}</el-col>
                      <el-col :span="3" class="inline-block border-left al-center check">
                        <el-checkbox v-model="item.isNeedOrignSel"
                                     @change="function(value) {clickTobaSelectMaterial(value,item,'isNeedOrignSel')}"></el-checkbox>
                      </el-col>
                    </el-row>
                    <el-row class="tb-item" v-if="item.copyCount>0">
                      <el-col :span="3" class="inline-block show-span">复印件</el-col>
                      <el-col :span="6" class="inline-block show-span">{{item.copyCount || '0'}}</el-col>
                      <el-col :span="12" class="inline-block show-span">{{item.realCopyCount || '0'}}</el-col>
                      <el-col :span="3" class="inline-block border-left al-center check">
                        <el-checkbox v-model="item.isNeedCopySel"
                                     @change="function(value) {clickTobaSelectMaterial(value,item,'isNeedCopySel')}"></el-checkbox>
                      </el-col>
                    </el-row>
                    <el-row class="tb-item" v-if="item.attCount>0">
                      <el-col :span="3" class="inline-block show-span">电子件</el-col>
                      <el-col :span="6" class="inline-block show-span">
                        <span v-if="item.isNeedAtt=='1'">必须</span>
                        <span v-else>非必须</span>
                      </el-col>
                      <el-col :span="12" class="inline-block show-span">{{item.attCount || '0'}}</el-col>
                      <el-col :span="3" class="inline-block border-left al-center check">
                        <el-checkbox v-model="item.isNeedElectronSel"
                                     @change="function(value) {clickTobaSelectMaterial(value,item,'isNeedElectronSel')}"></el-checkbox>
                      </el-col>
                    </el-row>
                  </el-col>
                </el-row>
              </div>
              <div class="show-all" @click="inSeletcedMaterialPandel = true;">确定并返回</div>
            </template>
            <!--待补全材料清单-->
            <template v-else>
              <el-row class="material-table-header">
                <el-col class="header-item" :span="8">材料名称</el-col>
                <el-col class="header-item" :span="2">类型</el-col>
                <el-col class="header-item" :span="4">补全份数</el-col>
                <el-col class="header-item" :span="8">意见</el-col>
                <el-col class="header-item" :span="2">操作</el-col>
              </el-row>
              <div class="material-table-wrap">
                <el-row class="material-table content-center"
                        v-for="(item,index) in matCorrectDtos"
                        :key="item.matId">
                  <el-col :span="8" class="tb-title inline-block"><p>{{item.matName}}</p></el-col>
                  <el-col :span="16" class="tb-content inline-block">
                    <el-row class="tb-item" v-if="item.isNeedOrign">
                      <el-col :span="3" class="inline-block tip">原件</el-col>
                      <el-col :span="6" class="inline-block border-left al-center num ">
                      <span class="color-999"
                            v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{item.paperCount || '0'}}</span>
                        <el-input class="w98" placeholder="补全份数" type="number" min="0" v-model="item.paperCount"
                                  v-else></el-input>
                      </el-col>
                      <el-col :span="12" class="inline-block border-left al-center opinion">
                      <span class="color-999"
                            v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{item.paperDueIninstOpinion || '暂无'}}</span>
                        <el-input class="w98" placeholder="请输入意见" v-model="item.paperDueIninstOpinion"
                                  v-else></el-input>
                      </el-col>
                      <el-col :span="3" class="inline-block border-left al-center delete">
                        <span class="color-999"
                              v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">
                            <i class="el-icon-delete color-999" style="cursor: not-allowed;"></i>
                        </span>
                        <i class="el-icon-delete" @click="delTobaMakeupMaterialMend('isNeedOrign',item,index)"
                           v-else></i>
                      </el-col>
                    </el-row>
                    <el-row class="tb-item" v-if="item.isNeedCopy">
                      <el-col :span="3" class="inline-block tip">复印件</el-col>
                      <el-col :span="6" class="inline-block border-left al-center num">
                      <span class="color-999"
                            v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{item.copyCount || '0'}}</span>
                        <el-input class="w98" placeholder="补全份数" type="number" min="0" v-model="item.copyCount"
                                  v-else></el-input>
                      </el-col>
                      <el-col :span="12" class="inline-block border-left al-center opinion">
                      <span class="color-999"
                            v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{item.copyDueIninstOpinion || '暂无'}}</span>
                        <el-input class="w98" placeholder="请输入意见" v-model="item.copyDueIninstOpinion" v-else></el-input>
                      </el-col>
                      <el-col :span="3" class="inline-block border-left al-center delete">
                        <span class="color-999"
                              v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">
                            <i class="el-icon-delete color-999" style="cursor: not-allowed;"></i>
                        </span>
                        <i class="el-icon-delete" @click="delTobaMakeupMaterialMend('isNeedCopy',item,index)"
                           v-else></i>
                      </el-col>
                    </el-row>
                    <el-row class="tb-item" v-if="item.isNeedElectron">
                      <el-col :span="3" class="inline-block tip">电子件</el-col>
                      <el-col :span="6" class="inline-block border-left al-center num">
                        <span> / </span>
                      </el-col>
                      <el-col :span="12" class="inline-block border-left al-center opinion">
                      <span class="color-999"
                            v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{item.attDueIninstOpinion || '暂无'}}</span>
                        <el-input class="w98" placeholder="请输入意见" v-model="item.attDueIninstOpinion" v-else></el-input>
                      </el-col>
                      <el-col :span="3" class="inline-block border-left al-center delete">
                        <span class="color-999"
                              v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">
                            <i class="el-icon-delete color-999" style="cursor: not-allowed;"></i>
                        </span>
                        <i class="el-icon-delete" @click="delTobaMakeupMaterialMend('isNeedElectron',item,index)"
                           v-else></i>
                      </el-col>
                    </el-row>
                  </el-col>
                </el-row>
              </div>
              <div class="show-all" v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7"
                   style="height: 1px;border-bottom: 1px solid #e5e5e5;"></div>
              <div class="show-all" @click="inSeletcedMaterialPandel = false;" v-else>选择材料</div>
            </template>
          </el-form-item>
          <el-form-item class="fill-item" label="备注">
            <span class="color-999" v-if="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">{{matMendDialogData.correctMemo || '暂无'}}</span>
            <el-input placeholder="请输入备注" type="textarea" v-model="matMendDialogData.correctMemo" v-else></el-input>
          </el-form-item>
        </el-form>
        <div slot="footer" class="dialog-footer">
          <el-button type="primary" @click="saveMaterialCorrectionMend"
                     :disabled="matMendDialogData.correctState == 6 || matMendDialogData.correctState == 7">补全开始
          </el-button>
          <el-button @click="isShowMatmend=false;">关闭</el-button>
        </div>
      </el-dialog>
      <!--  查看信用记录-->
      <el-dialog title="信用记录" class="special-dialog credit-dialog" top="80px"
                 v-loading="creditDiaLoading" width="950px"
                 :visible.sync="creditDiaVisible">
        <div class="credit-dia-wrap" :style="{maxHeight: (curHeight-250)+'px',overflow: 'auto'}">
          <div class="credit-dia-box">
            <div class="cd-hint-box"><i class="cd-hint-icon" :class="isBlack?'el-icon-error':'el-icon-warning'"></i>{{isBlack?('该'+(applySubjectType==0?'申请人':'企业')+'已被纳入信用黑名单，无法申报项目！'):('该'+(applySubjectType==0?'申请人':'企业')+'有'+loseCreditCount+'条失信记录')}}
            </div>
            <div class="cd-type-u" :class="{'is-black':item.itemCode=='bad'}"
                 :key="index"
                 v-for="(item,index) in creditTypeList" v-show="item.summaries&&item.summaries.length">
              <div class="cd-type-title">{{item.itemName}}</div>
              <div class="pre-list-box">
                <div class="pre-list-u" :class="{open: item2.isOpen}"
                     :key="index2"
                     v-for="(item2,index2) in item.summaries">
                  <div class="pre-u-title" @click="item2.isOpen = !item2.isOpen;">
                    <i v-if="item2.detailDtos.length>0"
                       :class="[item2.isOpen?'el-icon-caret-bottom':'el-icon-caret-right']"></i>
                    {{item2.cnDeptName}}（{{item2.creditUnitInfoName}}）（1条记录，最后更新时间{{$options.filters.formatDate(item2.lastUpdateTime)}}）
                  </div>
                  <div class="p-u-wrap" v-show="item2.isOpen">
                    <div class="pre-u-detail clearfix" v-for="uuu in item2.detailDtos">
                      <div class="fl p-detail-label">{{uuu.cnColumnName}}：</div>
                      <div class="fl p-detail-value">{{uuu.columnValue}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </el-dialog>
      <!-- 部门辅导选择事项 start -->
      <el-dialog title="部门辅导" class="solicit-opinion-dialog" v-loading="solicitOpinionLoading"
                 :close-on-click-modal="false" :visible.sync="solicitOpinionVisible" @close="closeSoDialog"
                 :width="curWidth>1220?'1200px':(curWidth-20)+'px'" top="20px">
        <div class="solicit-o-wrap"
             :style="{'max-height': (curHeight-210)+'px',overflow: 'auto','padding-bottom':'25px','min-height':'400px'}">
          <div class="so-content-u">
            <div class="so-table-title">并联审批事项列表</div>
            <el-table class="items-table" ref="soParallelItems" :data="soParallelItems" border
                      row-key="itemBasicId" tooltip-effect="dark" :default-sort="{prop: 'sortNo', order: 'ascending'}"
                      style="width: 100%">
              <el-table-column type="selection" align="center"
                               width="55">
              </el-table-column>
              <el-table-column label="事项名称" prop="sortNo" sortable>
                <template slot-scope="scope">
                  <span class="is-catalog" :class="scope.row.isCatalog!=1?'is-shishi':''">{{scope.row.isCatalog==1?'标准':'实施'}}</span>
                  {{scope.row.itemName}}
                  <span v-show="scope.row.isDone=='FINISHED'" class="isTag isDone">
                        已通过</span>
                  <span v-show="scope.row.isDone=='AGREE_TOLERANCE'" class="isTag isDone">
                        已通过</span>
                  <span v-show="scope.row.isDone=='HANDLING'" class="isTag isDoing">
                        办理中</span>
                  <span v-show="scope.row.isRecommend==1&&scope.row.isDone!='HANDLING'&&scope.row.isDone!='FINISHED'"
                        class="isTag isRecommend">推荐办理</span>
                  <p class="not-region-data" v-if="scope.row.itemHaved">* 该实施事项已存在，请勿重复选择!</p>
                  <p class="not-region-data" v-if="scope.row.notRegionData">* 该事项无匹配的行政区划及实施主体</p>
                </template>
              </el-table-column>
              <!--              <el-table-column label="行政区划" width="100" prop="regionName">-->
              <!--                <template slot-scope="scope">-->
              <!--                  <div v-if="scope.row.isImplement==false">-->
              <!--                    <el-select v-model="scope.row.implementItemVerId"-->
              <!--                               placeholder="请选择行政区划">-->
              <!--                      <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.regionName"-->
              <!--                                 :key="indexOp"-->
              <!--                                 @click.native="getItemOrgId(scope.row,scope.$index,item, 'core')||soSelectedOrg(scope.row,item)"-->
              <!--                                 :value="item.itemVerId"></el-option>-->
              <!--                    </el-select>-->
              <!--                  </div>-->
              <!--                  <div v-else>-->
              <!--                    <span>{{scope.row.regionName}}</span>-->
              <!--                  </div>-->
              <!--                </template>-->
              <!--              </el-table-column>-->
              <el-table-column prop="orgName" label="实施主体" width="280">
                <template slot-scope="scope">
                  <div v-if="scope.row.isImplement==false">
                    <el-select v-model="scope.row.implementItemVerId"
                               placeholder="请选择实施主体">
                      <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                 :key="indexOp"
                                 @click.native="getItemOrgId(scope.row,scope.$index,item,'croe')||soSelectedOrg(scope.row,item)"
                                 :value="item.itemVerId"></el-option>
                    </el-select>
                  </div>
                  <div v-else>
                    <span>{{scope.row.orgName}}</span>
                  </div>
                </template>
              </el-table-column>
            </el-table>
            <div class="so-table-title" style="margin-top:15px;">并行推进事项列表</div>
            <el-table class="items-table" ref="soCoreItems" :data="soCoreItems" border tooltip-effect="dark"
                      :default-sort="{prop: 'sortNo', order: 'ascending'}"
                      row-key="itemBasicId" style="width: 100%">
              <el-table-column type="selection" align="center" width="55">
              </el-table-column>
              <el-table-column label="事项名称" prop="sortNo" sortable>
                <template slot-scope="scope">
                      <span class="is-catalog"
                            :class="scope.row.isCatalog!=1?'is-shishi':''">{{scope.row.isCatalog==1?'标准':'实施'}}</span>
                  {{scope.row.itemName}}
                  <span v-show="scope.row.isDone=='FINISHED'" class="isTag isDone">
                        已通过</span>
                  <span v-show="scope.row.isDone=='AGREE_TOLERANCE'" class="isTag isDone">
                        已通过</span>
                  <span v-show="scope.row.isDone=='HANDLING'" class="isTag isDoing">
                        办理中</span>
                  <span v-show="scope.row.isRecommend==1&&scope.row.isDone!='HANDLING'&&scope.row.isDone!='FINISHED'"
                        class="isTag isRecommend">推荐办理</span>
                  <p class="not-region-data" v-if="scope.row.itemHaved">* 该实施事项已存在，请勿重复选择!</p>
                  <p class="not-region-data" v-if="scope.row.notRegionData">* 该事项无匹配的行政区划及实施主体</p>
                </template>
              </el-table-column>
              <!--              <el-table-column label="行政区划" width="100" prop="regionName">-->
              <!--                <template slot-scope="scope">-->
              <!--                  <div v-if="scope.row.isImplement==false">-->
              <!--                    <el-select v-model="scope.row.implementItemVerId"-->
              <!--                               placeholder="请选择行政区划">-->
              <!--                      <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.regionName"-->
              <!--                                 :key="indexOp"-->
              <!--                                 @click.native="getItemOrgId(scope.row,scope.$index,item, 'core')||soSelectedOrg(scope.row,item)"-->
              <!--                                 :value="item.itemVerId"></el-option>-->
              <!--                    </el-select>-->
              <!--                  </div>-->
              <!--                  <div v-else>-->
              <!--                    <span>{{scope.row.regionName}}</span>-->
              <!--                  </div>-->
              <!--                </template>-->
              <!--              </el-table-column>-->
              <el-table-column prop="orgName" label="实施主体" width="280">
                <template slot-scope="scope">
                  <div v-if="scope.row.isImplement==false">
                    <el-select v-model="scope.row.implementItemVerId"
                               placeholder="请选择实施主体">
                      <el-option v-for="(item,indexOp) in scope.row.carryOutItems" :label="item.orgName"
                                 :key="indexOp"
                                 @click.native="getItemOrgId(scope.row,scope.$index,item,'croe')||soSelectedOrg(scope.row,item)"
                                 :value="item.itemVerId"></el-option>
                    </el-select>
                  </div>
                  <div v-else>
                    <span>{{scope.row.orgName}}</span>
                  </div>
                </template>
              </el-table-column>
            </el-table>
          </div>
        </div>
        <div slot="footer" class="dialog-footer">
          <el-button @click="solicitOpinionVisible = false">取 消</el-button>
          <el-button type="primary" @click="startSolicit">确 定</el-button>
        </div>
      </el-dialog>
      <!-- 意见征求 end -->
      <!-- 项目代办协议 查看pdf弹窗 start -->
      <el-dialog title="查看协议" class="solicit-opinion-dialog agent-agreement" v-loading="prePdfDialogLoading"
                 :close-on-click-modal="false" :visible.sync="prePdfDialogVisible" @close="closePrePdf"
                 :width="curWidth>1220?'1200px':(curWidth-20)+'px'" top="20px">
        <div :style="{height: (curHeight-175)+'px'}">
          <iframe :src="prePdfUrl"></iframe>
        </div>
        <div slot="footer" class="dialog-footer">
          <el-button @click="prePdfDialogVisible = false">关闭</el-button>
          <el-button type="primary" @click="downLoadAgreement">下载</el-button>
        </div>
      </el-dialog>
      <!-- 项目代办协议 查看pdf弹窗 end -->
      <!-- 项目代办终止协议 start -->
      <el-dialog title="待办委托终止单" class="solicit-opinion-dialog stop-agent" v-loading="stopAgentDialogLoading"
                 :close-on-click-modal="false" :visible.sync="stopAgentDialogVisible" @close="closeStopAgentDialog"
                 :width="curWidth>820?'800px':(curWidth-20)+'px'" top="100px">
        <div :style="{'max-height': (curHeight-305)+'px'}" class="stop-a-box">
          <p class="au-hint-text">
            <i class="ag ag-warn-circle"></i>
            请填写终止原因，确认终止日期后点击“签章”
          </p>
          <el-form :model="stopAgentForm" label-width="112px" size="medium">
            <el-form-item label="代办委托项目">
              <el-input v-model="topProjName" readonly></el-input>
            </el-form-item>
            <el-form-item label="协议编号">
              <el-input v-model="stopAgentForm.code" readonly></el-input>
            </el-form-item>
            <el-form-item label="终止日期">
              <el-date-picker v-model="stopAgentForm.date" :clearable="false"
                              type="date" placeholder="选择日期">
              </el-date-picker>
            </el-form-item>
            <el-form-item label="终止原因">
              <el-input v-model="stopAgentForm.reason" type="textarea" :rows="3"></el-input>
            </el-form-item>
            <el-form-item label="待办委托终止单">
              <el-input v-model="stopAgentForm.fileName">
                <!--<el-button type="primary" slot="append" @click="seeStopAgent">查看</el-button>-->
              </el-input>
            </el-form-item>
          </el-form>
        </div>
        <div slot="footer" class="dialog-footer">
          <el-button @click="stopAgentDialogVisible = false">关闭</el-button>
          <el-button type="primary" @click="seeStopAgent">查看终止单</el-button>
          <el-button type="primary" @click="ensureStopAgent">签章</el-button>
        </div>
      </el-dialog>
      <!-- 项目代办终止协议 end -->
    </div>
  </template>
</div>
</body>
<!--<th:block th:include="common/common :: commonfooter" />-->
<!--<th:block th:include="common/common :: gaopaiyi" />-->
<script src="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/jquery-v1/jquery.min.js"
        th:src="@{/agcloud/framework/js-lib/jquery-v1/jquery.min.js}"></script>
<script src="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/element-2/polyfill.min.js"
        th:src="@{/agcloud/framework/js-lib/element-2/polyfill.min.js}"></script>
<script src="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/vue-v2/vue.js"
        th:src="@{/agcloud/framework/js-lib/vue-v2/vue.js}"></script>
<script src="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/element-2/element.js"
        th:src="@{/agcloud/framework/js-lib/element-2/element.js}"></script>
<script src="../../static/common/js/axios.min.js" th:src="@{/common/js/axios.min.js}"></script>
<script src="/framework-ui/src/main/resources/static/agcloud/framework/js-lib/agcloud-lib/js/common.js"
        th:src="@{/agcloud/framework/js-lib/agcloud-lib/js/common.js}"></script>
<!--引入图片转pdf文件-->
<script type="text/javascript" th:src="@{/common/js/pdfmake.js}"></script>
<script src="../../static/common/js/qwebchannel.js" th:src="@{/common/js/qwebchannel.js}"></script>
<script src="../../static/common/js/liangtian_gaopaoyi.js" th:src="@{/common/js/liangtian_gaopaoyi.js}"></script>
<script src="../../static/common/js/fangzheng_gaopaiyi.js" th:src="@{/common/js/fangzheng_gaopaiyi.js}"></script>
<!--InitializationCompleted 是方正高拍仪控件的事件，表示控件加载完成-->
<script type="text/javascript" FOR="Capture" EVENT="InitializationCompleted">
  catchInitFinishedMessage();
</script>

<script th:src="@{/preview/pdfjs/build/pdf.js}"></script>
<script src="../../static/apply/js/index.js" th:src="@{/apply/js/index.js}"></script>

</html>